function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Cctor:function(n){var t=!0;return function(){t&&(t=!1,n())}},Class:function(n,t,i){var e=t?new t:{},r=function(n){if(n)for(var t in n)this[t]=n[t]},u,f;for(u in n)e[u]=n[u];if(r.prototype=e,i)for(f in i)r[f]=i[f];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"init"in this&&(n(this.init),this.init=[]);"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){window.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp;a=window;b=a.WebSharper=a.WebSharper||{};c=b.IntroJS=b.IntroJS||{};d=c.Sample=c.Sample||{};e=d.Client=d.Client||{};f=b.UI=b.UI||{};g=f.Next=f.Next||{};h=g.Var=g.Var||{};i=b.Operators=b.Operators||{};j=b.Ref=b.Ref||{};k=b.List=b.List||{};l=k.T=k.T||{};m=g.ListModel=g.ListModel||{};n=b.Arrays=b.Arrays||{};o=a.WebSharper$IntroJS$Sample_Templates=a.WebSharper$IntroJS$Sample_Templates||{};p=g.Snap=g.Snap||{};q=g.Abbrev=g.Abbrev||{};r=q.Fresh=q.Fresh||{};s=a.StartupCode$WebSharper_IntroJS_Sample$Client=a.StartupCode$WebSharper_IntroJS_Sample$Client||{};t=b.JavaScript=b.JavaScript||{};u=t.Pervasives=t.Pervasives||{};v=g.Doc=g.Doc||{};w=b.Int32=b.Int32||{};x=b.Collections=b.Collections||{};y=x.Dictionary=x.Dictionary||{};z=b.Unchecked=b.Unchecked||{};A=g.DomUtility=g.DomUtility||{};B=a.StartupCode$WebSharper_UI_Next$Abbrev=a.StartupCode$WebSharper_UI_Next$Abbrev||{};C=g.View=g.View||{};D=g.Docs=g.Docs||{};E=t.JSModule=t.JSModule||{};F=b.Seq=b.Seq||{};G=g.Client=g.Client||{};H=G.DocNode=G.DocNode||{};I=a.StartupCode$WebSharper_UI_Next$DomUtility=a.StartupCode$WebSharper_UI_Next$DomUtility||{};J=q.Mailbox=q.Mailbox||{};K=g.Storage=g.Storage||{};L=a.StartupCode$WebSharper_UI_Next$Doc_Client=a.StartupCode$WebSharper_UI_Next$Doc_Client||{};M=g.Attrs=g.Attrs||{};N=g.CheckedInput=g.CheckedInput||{};O=g.DocElemNode=g.DocElemNode||{};P=g.AttrModule=g.AttrModule||{};Q=g.AttrProxy=g.AttrProxy||{};R=b.Slice=b.Slice||{};S=b.Strings=b.Strings||{};T=g.Array=g.Array||{};U=g.Elt=g.Elt||{};V=b.Enumerator=b.Enumerator||{};W=G.Docs=G.Docs||{};X=W.RunState=W.RunState||{};Y=W.NodeSet=W.NodeSet||{};Z=g.An=g.An||{};_0=q.Async=q.Async||{};_1=K.ArrayStorage=K.ArrayStorage||{};_2=x.HashSet=x.HashSet||{};_3=x.DictionaryUtil=x.DictionaryUtil||{};_4=G.Attrs=G.Attrs||{};_5=_4.Dyn=_4.Dyn||{};_6=g.String=g.String||{};_7=b.Concurrency=b.Concurrency||{};_8=g.Anims=g.Anims||{};_9=g.AppendList=g.AppendList||{};_=V.T=V.T||{};$=b.Char=b.Char||{};ba=b.N=b.N||{};bb=g.DynamicAttrNode=g.DynamicAttrNode||{};bc=a.StartupCode$WebSharper_UI_Next$Attr_Client=a.StartupCode$WebSharper_UI_Next$Attr_Client||{};bd=a.StartupCode$WebSharper_UI_Next$Animation=a.StartupCode$WebSharper_UI_Next$Animation||{};be=q.HashSet=q.HashSet||{};bf=_7.Scheduler=_7.Scheduler||{};bg=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bh=g.Easing=g.Easing||{};bi=W.DomNodes=W.DomNodes||{};bj=b.OperationCanceledException=b.OperationCanceledException||{};bk=b.CancellationTokenSource=b.CancellationTokenSource||{};bl=x.HashSetUtil=x.HashSetUtil||{};bm=a.StartupCode$WebSharper_UI_Next$AppendList=a.StartupCode$WebSharper_UI_Next$AppendList||{};bn=b.Lazy=b.Lazy||{};bo=a.IntelliFactory;bp=bo&&bo.Runtime;e.Main=function(){var bq,br,bs,bt,bu,bv,bw,bx,by,bz;bq=h.Create$1("");br=o.main((bs=(bt=(bu=(bv=l.Empty,(bw=(bx=e.People().v,v.Convert(function(bA){var bB;return o.listitem((bB=l.Empty,new l({$:1,$0:{$:1,$0:"name",$1:bA},$1:bB})));},bx)),new l({$:1,$0:{$:0,$0:"listcontainer",$1:bw},$1:bv}))),new l({$:1,$0:{$:6,$0:"name",$1:bq},$1:bu})),new l({$:1,$0:{$:4,$0:"add",$1:(by=function(){e.People().Append(bq.c);h.Set(bq,"");},function(){return function(){return by();};})},$1:bt})),new l({$:1,$0:{$:4,$0:"intro",$1:(bz=function(){var bA;bA=(new a.introJs()).start();},function(){return function(){return bz();};})},$1:bs})));v.RunById("main",br);};e.People=function(){s.$cctor();return s.People;};h.Create$1=function(bq){var br;br=null;br=h.New(false,bq,p.CreateWithValue(bq),r.Int(),function(){return br.s;});return br;};h.Set=function(bq,br){if(bq.o)(function(bs){return bs("WebSharper UI.Next: invalid attempt to change value of a Var after calling SetFinal");}(function(bs){a.console.log(bs);}));else{p.MarkObsolete(bq.s);bq.c=br;bq.s=p.CreateWithValue(br);}};i.FailWith=function(bq){throw a.Error(bq);};i.DefaultArg=function(bq,br){return bq==null?br:bq.$0;};i.KeyValue=function(bq){return[bq.K,bq.V];};j.decr=function(bq){bq[0]--;};i.Compare=function(bq,br){return z.Compare(bq,br);};l=k.T=bp.Class({GetEnumerator:function(){return new _.New(this,null,function(bq){var br,bs;br=bq.s;return br.$==0?false:(bs=br.$1,(bq.c=br.$0,bq.s=bs,true));},void 0);},GetEnumerator0:function(){return V.Get(this);}},null,l);l.Empty=new l({$:0});m=g.ListModel=bp.Class({Append:function(bq){var br,bs,bt,bu;br=this;bs=this["var"].RVal();bt=this.key(bq);bu=n.tryFindIndex(function(bv){return z.Equals(br.key(bv),bt);},bs);(bu!=null?bu.$==1:false)?this["var"].set_RVal(this.storage.SSetAt(bu.$0,bq,bs)):this["var"].set_RVal(this.storage.SAppend(bq,bs));this.ObsoleteKey(bt);},ObsoleteKey:function(bq){var br,bs,bt,bu;br=(bs=null,[this.it.TryGetValue(bq,{get:function(){return bs;},set:function(bv){bs=bv;}}),bs]);br[0]?(bt=br[1],p.MarkObsolete(bt),bu=this.it.Remove(bq)):void 0;},GetEnumerator:function(){return V.Get(this["var"].RVal());},GetEnumerator0:function(){return V.Get0(this["var"].RVal());}},null,m);m.New=bp.Ctor(function(bq,br){var bs;bs=h.Create$1(n.ofSeq(F.distinctBy(bq,br.SInit())));m.New$3.call(this,bq,bs,br);},m);m.New$3=bp.Ctor(function(bq,br,bs){var bt;this.key=bq;this["var"]=br;this.storage=bs;this.v=(bt=this["var"].RView(),C.Map(function(bu){return bu.slice();},bt));this.it=new y.New$5();},m);n.get=function(bq,br){n.checkBounds(bq,br);return bq[br];};n.set=function(bq,br,bs){n.checkBounds(bq,br);bq[br]=bs;};n.checkBounds=function(bq,br){if(br<0?true:br>=bq.length)i.FailWith("Index was outside the bounds of the array.");};n.length=function(bq){return bq.dims===2?bq.length*bq.length:bq.length;};o.listitem=function(bq){v.LoadLocalTemplates("index");return bq?v.NamedTemplate("index",{$:1,$0:"listitem"},bq):void 0;};o.main=function(bq){v.LoadLocalTemplates("index");return bq?v.NamedTemplate("index",{$:1,$0:"main"},bq):void 0;};h=g.Var=bp.Class({RVal:function(){return this.c;},set_RVal:function(bq){h.Set(this,bq);},RView:function(){return this.v;},RUpdM:function(bq){var br,bs;br=bq(this.c);(br!=null?br.$==1:false)?(bs=br.$0,h.Set(this,bs)):void 0;}},null,h);h.New=function(bq,br,bs,bt,bu){return new h({o:bq,c:br,s:bs,i:bt,v:bu});};p.CreateWithValue=function(bq){return p.Make({$:2,$0:bq,$1:[]});};p.Make=function(bq){return{s:bq};};p.MarkObsolete=function(bq){var br,bs;br=bq.s;(br.$==1?true:br.$==2?(bs=br.$1,false):br.$==3?(bs=br.$1,false):true)?void 0:(bq.s={$:1},F.iter(function(bt){bt();},bs));};p.When=function(bq,br,bs){var bt,bu,bv;bt=bq.s;bt.$==1?bs():bt.$==2?(bu=bt.$0,bt.$1.push(bs),br(bu)):bt.$==3?(bv=bt.$1,bt.$0.push(br),bv.push(bs)):br(bt.$0);};p.Map=function(bq,br){var bs,bt,bu,bv;bs=br.s;return bs.$==0?(bt=bs.$0,p.CreateForever(bq(bt))):(bu=p.Create(),(p.When(br,(bv=function(bw){p.MarkDone(bu,br,bw);},function(bw){return bv(bq(bw));}),p.Obs(bu)),bu));};p.Map3=function(bq,br,bs,bt){var bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK;function bL(bM){var bN,bO,bP,bQ,bR,bS,bT,bU,bV;if(!p.IsDone(bJ)){bN=p.ValueAndForever(br);bO=p.ValueAndForever(bs);bP=p.ValueAndForever(bt);(bN!=null?bN.$==1:false)?(bO!=null?bO.$==1:false)?(bP!=null?bP.$==1:false)?(bQ=bN.$0[1],bR=bO.$0[1],bS=bP.$0[1],bT=bN.$0[0],bU=bO.$0[0],bV=bP.$0[0],((bQ?bR:false)?bS:false)?p.MarkForever(bJ,bq(bT,bU,bV)):p.MarkReady(bJ,bq(bT,bU,bV))):void 0:void 0:void 0;}}bu=br.s;bv=bs.s;bw=bt.s;return bu.$==0?bv.$==0?bw.$==0?(bx=bu.$0,(by=bv.$0,(bz=bw.$0,p.CreateForever(bq(bx,by,bz))))):(bA=bu.$0,(bB=bv.$0,p.Map(function(bM){return bq(bA,bB,bM);},bt))):bw.$==0?(bC=bu.$0,(bD=bw.$0,p.Map(function(bM){return bq(bC,bM,bD);},bs))):(bE=bu.$0,p.Map2(function(bM,bN){return bq(bE,bM,bN);},bs,bt)):bv.$==0?bw.$==0?(bF=bv.$0,(bG=bw.$0,p.Map(function(bM){return bq(bM,bF,bG);},br))):(bH=bv.$0,p.Map2(function(bM,bN){return bq(bM,bH,bN);},br,bt)):bw.$==0?(bI=bw.$0,p.Map2(function(bM,bN){return bq(bM,bN,bI);},br,bs)):(bJ=p.Create(),(bK=p.Obs(bJ),(p.When(br,bL,bK),p.When(bs,bL,bK),p.When(bt,bL,bK),bJ)));};p.Sequence=function(bq){var br,bs,bt,bu,bv,bw;br=n.ofSeq(bq);return br.length==0?p.CreateForever([]):(bs=p.Create(),(bt=[n.length(br)-1],(bu=p.Obs(bs),(bv=function(){var bx,by;if(bt[0]===0){bx=(by=function(bz){var bA;bA=bz.s;return bA.$==0?bA.$0:bA.$==2?bA.$0:i.FailWith("value not found by View.Sequence");},function(bz){return n.map(by,bz);}(br));n.forall(p.IsForever,br)?p.MarkForever(bs,bx):p.MarkReady(bs,bx);}else j.decr(bt);},(bw=function(bx){p.When(bx,bv,bu);},function(bx){n.iter(bw,bx);}(br),bs)))));};p.Map2=function(bq,br,bs){var bt,bu,bv,bw,bx,by,bz,bA;function bB(bC){var bD,bE,bF,bG,bH,bI;if(!p.IsDone(bz)){bD=p.ValueAndForever(br);bE=p.ValueAndForever(bs);(bD!=null?bD.$==1:false)?(bE!=null?bE.$==1:false)?(bF=bD.$0[1],bG=bE.$0[1],bH=bD.$0[0],bI=bE.$0[0],(bF?bG:false)?p.MarkForever(bz,bq(bH,bI)):p.MarkReady(bz,bq(bH,bI))):void 0:void 0;}}bt=br.s;bu=bs.s;return bt.$==0?bu.$==0?(bv=bt.$0,(bw=bu.$0,p.CreateForever(bq(bv,bw)))):(bx=bt.$0,p.Map(function(bC){return bq(bx,bC);},bs)):bu.$==0?(by=bu.$0,p.Map(function(bC){return bq(bC,by);},br)):(bz=p.Create(),(bA=p.Obs(bz),(p.When(br,bB,bA),p.When(bs,bB,bA),bz)));};p.CreateForever=function(bq){return p.Make({$:0,$0:bq});};p.Map2Unit=function(bq,br){var bs,bt,bu,bv;function bw(){var bx,by,bz,bA;if(!p.IsDone(bu)){bx=p.ValueAndForever(bq);by=p.ValueAndForever(br);(bx!=null?bx.$==1:false)?(by!=null?by.$==1:false)?(bz=bx.$0[1],bA=by.$0[1],(bz?bA:false)?p.MarkForever(bu,null):p.MarkReady(bu,null)):void 0:void 0;}}bs=bq.s;bt=br.s;return bs.$==0?bt.$==0?p.CreateForever():br:bt.$==0?bq:(bu=p.Create(),(bv=p.Obs(bu),(p.When(bq,bw,bv),p.When(br,bw,bv),bu)));};p.IsForever=function(bq){return bq.s.$==0?true:false;};p.WhenObsolete=function(bq,br){var bs;bs=bq.s;bs.$==1?br():bs.$==2?bs.$1.push(br):bs.$==3?bs.$1.push(br):void 0;};p.Create=function(){return p.Make({$:3,$0:[],$1:[]});};p.MarkDone=function(bq,br,bs){if(p.IsForever(br))p.MarkForever(bq,bs);else p.MarkReady(bq,bs);};p.Obs=function(bq){return function(){p.MarkObsolete(bq);};};p.IsDone=function(bq){var br;br=bq.s;return br.$==0?true:br.$==2?true:false;};p.ValueAndForever=function(bq){var br;br=bq.s;return br.$==0?{$:1,$0:[br.$0,true]}:br.$==2?{$:1,$0:[br.$0,false]}:null;};p.MarkForever=function(bq,br){var bs,bt;bs=bq.s;bs.$==3?(bt=bs.$0,bq.s={$:0,$0:br},F.iter(function(bu){bu(br);},bt)):void 0;};p.MarkReady=function(bq,br){var bs,bt,bu;bs=bq.s;bs.$==3?(bt=bs.$1,bu=bs.$0,bq.s={$:2,$0:br,$1:bt},F.iter(function(bv){bv(br);},bu)):void 0;};p.Join=function(bq){var br,bs;br=p.Create();bs=p.Obs(br);p.When(bq,function(bt){var bu;bu=bt();p.When(bu,function(bv){if(p.IsForever(bu)?p.IsForever(bq):false)p.MarkForever(br,bv);else p.MarkReady(br,bv);},bs);},bs);return br;};r.Int=function(){r.set_counter(r.counter()+1);return r.counter();};r.set_counter=function(bq){B.$cctor();B.counter=bq;};r.counter=function(){B.$cctor();return B.counter;};s.$cctor=bp.Cctor(function(){s.People=m.FromSeq(["John","Paul"]);s.$cctor=a.ignore;});u.NewFromSeq=function(bq){var br,bs,bt;br={};bs=V.Get(bq);try{while(bs.MoveNext()){bt=bs.Current();br[bt[0]]=bt[1];}}finally{if("Dispose"in bs)bs.Dispose();}return br;};v=g.Doc=bp.Class({},null,v);v.RunById=function(bq,br){var bs;bs=A.Doc().getElementById(bq);z.Equals(bs,null)?i.FailWith("invalid id: "+bq):v.Run(bs,br);};v.Convert=function(bq,br){return v.Flatten(C.MapSeqCached(bq,br));};v.LoadLocalTemplates=function(bq){(function(){var br,bs,bt,bu,bv;while(true){bs=a.document.querySelector("[ws-template]");if(z.Equals(bs,null)){bt=a.document.querySelector("[ws-children-template]");if(z.Equals(bt,null))return null;else{bu=bt.getAttribute("ws-children-template");bt.removeAttribute("ws-children-template");br=function(bw){return function(){return A.ChildrenArray(bw);};}(bt);v.PrepareTemplate(bq,{$:1,$0:bu},br);}}else{bv=bs.getAttribute("ws-template");v.PrepareSingleTemplate(bq,{$:1,$0:bv},bs);}}}());};v.NamedTemplate=function(bq,br,bs){var bt,bu,bv,bw,bx;bt=v.ComposeName(bq,br);bu=(bv=null,[D.LoadedTemplates().TryGetValue(bt,{get:function(){return bv;},set:function(by){bv=by;}}),bv]);return bu[0]?(bw=bu[1],(bx=bw.cloneNode(true),v.ChildrenTemplate(bx,bs))):(a.console.warn.apply(a.console,["Local template doesn't exist"].concat([bt])),v.Empty());};v.Run=function(bq,br){var bs,bt,bu,bv;bs=br.docNode;D.LinkElement(bq,bs);bt=D.CreateRunState(bq,bs);bu=J.StartProcessor(D.PerformAnimatedUpdate(bt,bs));bv=br.updates;C.Sink(bu,bv);};v.Flatten=function(bq){return v.EmbedView(C.Map(v.Concat,bq));};v.PrepareTemplate=function(bq,br,bs){var bt,bu,bv,bw,bx,by;if(!D.LoadedTemplates().ContainsKey(v.ComposeName(bq,br))){bt=bs();for(bu=0,bv=bt.length-1;bu<=bv;bu++){bw=n.get(bt,bu);bx=bw.parentNode;z.Equals(bx,null)?void 0:by=bx.removeChild(bw);}v.PrepareTemplateStrict(bq,br,bt);}};v.PrepareSingleTemplate=function(bq,br,bs){var bt,bu,bv,bw;bs.removeAttribute("ws-template");bt=bs.getAttribute("ws-replace");bt===null?void 0:(bs.removeAttribute("ws-replace"),bu=bs.parentNode,z.Equals(bu,null)?void 0:(bv=a.document.createElement(bs.tagName),bv.setAttribute("ws-replace",bt),bw=bu.replaceChild(bv,bs)));v.PrepareTemplateStrict(bq,br,[bs]);};v.ComposeName=function(bq,br){return(bq+"/"+i.DefaultArg(br,"")).toLowerCase();};v.ChildrenTemplate=function(bq,br){var bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH;bB=[];bC=[];bD=[];bE=[];bF=new y.New$5();bG=V.Get(br);try{while(bG.MoveNext()){bH=bG.Current();bF.set_Item(bH.$0,bH);}}finally{if("Dispose"in bG)bG.Dispose();}bs=A.ChildrenArray(bq);bt=function(bI,bJ){var bK,bL,bM,bN;bK=M.Insert(bI,bJ);bL=bC.push(M.Updates(bK));bM=bD.push([bI,bK]);bN=function(bO){var bP;bP=bE.push(function(){bO(bI);});};return function(bO){if(bO==null);else bN(bO.$0);}(bp.GetOptional(bK.OnAfterRender));};bu=function(bI){var bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX;bJ=(bK=null,[bF.TryGetValue(bI,{get:function(){return bK;},set:function(bY){bK=bY;}}),bK]);return bJ[0]?bJ[1].$==0?{$:1,$0:bJ[1].$1}:bJ[1].$==1?(bL=bJ[1].$1,{$:1,$0:v.TextNode(bL)}):bJ[1].$==2?(bM=bJ[1].$1,{$:1,$0:v.TextView(bM)}):bJ[1].$==6?(bN=bJ[1].$1,{$:1,$0:v.TextView(bN.RView())}):bJ[1].$==7?(bO=bJ[1].$1,{$:1,$0:v.TextView((bP=bO.RView(),C.Map(a.String,bP)))}):bJ[1].$==8?(bQ=bJ[1].$1,{$:1,$0:v.TextView((bR=bQ.RView(),C.Map(function(bY){return bY.get_Input();},bR)))}):bJ[1].$==9?(bS=bJ[1].$1,{$:1,$0:v.TextView((bT=bS.RView(),C.Map(a.String,bT)))}):bJ[1].$==10?(bU=bJ[1].$1,{$:1,$0:v.TextView((bV=bU.RView(),C.Map(function(bY){return bY.get_Input();},bV)))}):bJ[1].$==11?(bW=bJ[1].$1,{$:1,$0:v.TextView((bX=bW.RView(),C.Map(a.String,bX)))}):(a.console.warn.apply(a.console,["Content hole filled with attribute data"].concat([bI])),null):null;};A.IterSelector(bq,"[ws-hole]",function(bI){var bJ,bK,bL,bM,bN,bO;bN=bI.getAttribute("ws-hole");bI.removeAttribute("ws-hole");while(bI.hasChildNodes()){bO=bI.removeChild(bI.lastChild);}bJ=bu(bN);(bJ!=null?bJ.$==1:false)?(bK=bJ.$0,D.LinkElement(bI,bK.docNode),bL=bB.push(O.New(M.Empty(bI),bK.docNode,null,bI,r.Int(),null)),bM=bC.push(bK.updates)):void 0;});A.IterSelector(bq,"[ws-replace]",function(bI){var bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT;bJ=bI.getAttribute("ws-replace");bK=bu(bJ);(bK!=null?bK.$==1:false)?(bL=bK.$0,bM=bI.parentNode,bN=a.document.createTextNode(""),bO=bM.replaceChild(bN,bI),bP=D.InsertBeforeDelim(bN,bL.docNode),bQ=function(bU){n.set(bs,bU,bL.docNode);},function(bU){if(bU==null);else bQ(bU.$0);}((bR=function(bU){return bI===bU;},function(bU){return n.tryFindIndex(bR,bU);}(bs))),bS=bB.push(O.New(M.Empty(bM),bL.docNode,{$:1,$0:[bP,bN]},bM,r.Int(),null)),bT=bC.push(bL.updates)):void 0;});A.IterSelector(bq,"[ws-attr]",function(bI){var bJ,bK,bL;bJ=bI.getAttribute("ws-attr");bI.removeAttribute("ws-attr");bK=(bL=null,[bF.TryGetValue(bJ,{get:function(){return bL;},set:function(bM){bL=bM;}}),bL]);bK[0]?bK[1].$==3?bt(bI,bK[1].$1):a.console.warn.apply(a.console,["Attribute hole filled with non-attribute data"].concat([bJ])):void 0;});A.IterSelector(bq,"[ws-on]",function(bI){var bJ,bK;bt(bI,Q.Concat((bJ=function(bL){var bM,bN,bO,bP,bQ,bR;bM=S.SplitChars(bL,[58],1);bN=(bO=null,[bF.TryGetValue(n.get(bM,1),{get:function(){return bO;},set:function(bS){bO=bS;}}),bO]);return bN[0]?bN[1].$==4?(bP=bN[1].$1,{$:1,$0:P.Handler(n.get(bM,0),bP)}):(bQ="Event hole on"+n.get(bM,0)+" filled with non-event data",bR=[n.get(bM,1)],a.console.warn.apply(a.console,[bQ].concat(bR)),null):null;},function(bL){return n.choose(bJ,bL);}((bK=bI.getAttribute("ws-on"),S.SplitChars(bK,[32],1))))));bI.removeAttribute("ws-on");});A.IterSelector(bq,"[ws-onafterrender]",function(bI){var bJ,bK,bL,bM;bJ=bI.getAttribute("ws-onafterrender");bK=(bL=null,[bF.TryGetValue(bJ,{get:function(){return bL;},set:function(bN){bL=bN;}}),bL]);bK[0]?bK[1].$==5?(bM=bK[1].$1,bI.removeAttribute("ws-onafterrender"),bt(bI,P.OnAfterRender(bM))):a.console.warn.apply(a.console,["onafterrender hole filled with non-onafterrender data"].concat([bJ])):void 0;});A.IterSelector(bq,"[ws-var]",function(bI){var bJ,bK,bL,bM,bN,bO,bP,bQ,bR;bJ=bI.getAttribute("ws-var");bI.removeAttribute("ws-var");bK=(bL=null,[bF.TryGetValue(bJ,{get:function(){return bL;},set:function(bS){bL=bS;}}),bL]);bK[0]?bK[1].$==6?(bM=bK[1].$1,bt(bI,P.Value(bM))):bK[1].$==7?(bN=bK[1].$1,bt(bI,P.Checked(bN))):bK[1].$==8?(bO=bK[1].$1,bt(bI,P.IntValue(bO))):bK[1].$==9?(bP=bK[1].$1,bt(bI,P.IntValueUnchecked(bP))):bK[1].$==10?(bQ=bK[1].$1,bt(bI,P.FloatValue(bQ))):bK[1].$==11?(bR=bK[1].$1,bt(bI,P.FloatValueUnchecked(bR))):a.console.warn.apply(a.console,["Var hole filled with non-Var data"].concat([bJ])):void 0;});A.IterSelector(bq,"[ws-attr-holes]",function(bI){var bJ,bK,bL,bM,bN,bO;bL=(bJ=D.TextHoleRE(),new a.RegExp(bJ,"g"));bM=(bK=bI.getAttribute("ws-attr-holes"),S.SplitChars(bK,[32],1));bI.removeAttribute("ws-attr-holes");for(bN=0,bO=bM.length-1;bN<=bO;bN++)(function(){var bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb;b9=n.get(bM,bN);b_=bI.getAttribute(b9);bP=null;bQ=0;b$=[];while(bP=bL.exec(b_),bP!==null){ca=R.string(b_,{$:1,$0:bQ},{$:1,$0:bL.lastIndex-n.get(bP,0).length-1});bQ=bL.lastIndex;cb=b$.push([ca,n.get(bP,1)]);}bS=R.string(b_,{$:1,$0:bQ},null);bL.lastIndex=0;bT=n.foldBack(function(cc,cd){return(function(ce){var cf,cg;cf=ce[0];cg=ce[1];return function(ch){var ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy;ci=ch[0];cj=ch[1];ck=(cl=(cm=null,[bF.TryGetValue(cg,{get:function(){return cm;},set:function(cz){cm=cz;}}),cm]),cl[0]?cl[1].$==1?{$:0,$0:cl[1].$1}:cl[1].$==2?{$:1,$0:cl[1].$1}:cl[1].$==6?{$:1,$0:cl[1].$1.RView()}:cl[1].$==7?(cn=cl[1].$1,{$:1,$0:(co=cn.RView(),C.Map(a.String,co))}):cl[1].$==8?(cp=cl[1].$1,{$:1,$0:(cq=cp.RView(),C.Map(function(cz){return cz.get_Input();},cq))}):cl[1].$==9?(cr=cl[1].$1,{$:1,$0:(cs=cr.RView(),C.Map(a.String,cs))}):cl[1].$==10?(ct=cl[1].$1,{$:1,$0:(cu=ct.RView(),C.Map(function(cz){return cz.get_Input();},cu))}):cl[1].$==11?(cv=cl[1].$1,{$:1,$0:(cw=cv.RView(),C.Map(a.String,cw))}):(a.console.warn.apply(a.console,["Attribute value hole filled with non-text data"].concat([cg])),{$:0,$0:""}):{$:0,$0:""});return ck.$==1?(cx=ck.$0,cy=ci===""?cx:C.Map(function(cz){return cz+ci;},cx),[cf,new l({$:1,$0:cy,$1:cj})]):[cf+ck.$0+ci,cj];};}(cc))(cd);},b$,[bS,l.Empty]);return bt(bI,bT[1].$==1?bT[1].$1.$==1?bT[1].$1.$1.$==1?bT[1].$1.$1.$1.$==0?(bU=bT[0],bV=bT[1].$0,bW=bT[1].$1.$0,bX=bT[1].$1.$1.$0,P.Dynamic(b9,C.Map3(function(cc,cd,ce){return bU+cc+cd+ce;},bV,bW,bX))):(bY=bT[0],bZ=bT[1],b0=(b1=function(cc){return bY+S.concat("",cc);},function(cc){return C.Map(b1,cc);}(C.Sequence(bZ))),P.Dynamic(b9,b0)):(b2=bT[0],b3=bT[1].$0,b4=bT[1].$1.$0,P.Dynamic(b9,C.Map2(function(cc,cd){return b2+cc+cd;},b3,b4))):bT[0]===""?(b5=bT[1].$0,P.Dynamic(b9,b5)):(b6=bT[0],b7=bT[1].$0,P.Dynamic(b9,C.Map(function(cc){return b6+cc;},b7))):(b8=bT[0],Q.Create(b9,b8)));}());});bv=(bw=bE.length==0?null:{$:1,$0:function(bI){n.iter(function(bJ){bJ(bI);},bE);}},bp.DeleteEmptyFields({Els:bs,Dirty:true,Holes:bB,Attrs:bD,Render:bw?bw.$0:void 0},["Render"]));bx=(by=C.Const(),function(bI){return T.TreeReduce(by,C.Map2Unit,bI);}(bC));return((bs?n.length(bs)===1:false)?n.get(bs,0)instanceof a.Node?(bA=n.get(bs,0),z.Equals(bA.nodeType,a.Node.ELEMENT_NODE))?(bz=n.get(bs,0),true):false:false:false)?U.TreeNode(bv,bx):v.Mk({$:6,$0:bv},bx);};v.Empty=function(){var bq,br;bq=H.EmptyDoc;br=C.Const();return v.Mk(bq,br);};v.Concat=function(bq){var br,bs;br=T.ofSeqNonCopying(bq);bs=v.Empty();return T.TreeReduce(bs,v.Append,br);};v.EmbedView=function(bq){var br,bs,bt,bu;br=D.CreateEmbedNode();bs={$:2,$0:br};return function(bv){return v.Mk(bs,bv);}((bt=function(){},function(bv){return C.Map(bt,bv);}((bu=function(bv){D.UpdateEmbedNode(br,bv.docNode);return bv.updates;},function(bv){return C.Bind(bu,bv);}(bq)))));};v.PrepareTemplateStrict=function(bq,br,bs){var bt,bu,bv,bw,bx,by,bz,bA;function bB(bG,bH,bI){var bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9;while(true)switch(bG){case 0:bQ=R.string(bH.nodeName,{$:1,$0:3},null).toLowerCase();bR=(bJ=bQ.indexOf(a.String.fromCharCode(46)),bJ===-1?bq+"/"+bQ:S.Replace(bQ,".","/"));if(!D.LoadedTemplates().ContainsKey(bR))return a.console.warn.apply(a.console,["Instantiating non-loaded template"].concat([bR]));else{bS=D.LoadedTemplates().get_Item(bR);bT=bS.cloneNode(true);bU=new _2.New$3();bV=new y.New$5();bW=bH.attributes;for(bX=0,bY=bW.length-1;bX<=bY;bX++){bZ=bW.item(bX).name.toLowerCase();b0=(b1=bW.item(bX).nodeValue,b1===""?bZ:b1.toLowerCase());bV.set_Item(bZ,b0);!bU.Add(bZ)?a.console.warn.apply(a.console,["Hole mapped twice"].concat([bZ])):void 0;}for(b2=0,b3=bH.childNodes.length-1;b2<=b3;b2++){b4=bH.childNodes[b2];z.Equals(b4.nodeType,a.Node.ELEMENT_NODE)?!bU.Add(b4.nodeName.toLowerCase())?a.console.warn.apply(a.console,["Hole filled twice"].concat([bR])):void 0:void 0;}b5=bH.childNodes.length===1?z.Equals(bH.firstChild.nodeType,a.Node.TEXT_NODE):false;if(b5){bL=by(bT,bH.firstChild.textContent);bM=(bN=function(b_){return function(b$){return b_.Add(b$);};}(bU),bO=function(){},function(b_){return bO(bN(b_));});((function(b_){return function(b$){if(b$==null);else b_(b$.$0);};}(bM))(bL));}bx(bT,bU);if(!b5){for(b6=0,b7=bH.childNodes.length-1;b6<=b7;b6++){b8=bH.childNodes[b6];z.Equals(b8.nodeType,a.Node.ELEMENT_NODE)?b8.hasAttributes()?bw(bT,b8):bC(bT,b8):void 0;}}bv(bT,bV);(((function(b_){var b$;b$=function(ca,cb){return bz(b_,ca,cb);};return function(ca){return function(cb){return b$(ca,cb);};};}(bT))(bH.parentNode))(bH));return bP=bH.parentNode.removeChild(bH);}case 1:if(bI!==null){b9=bI.nextSibling;if(z.Equals(bI.nodeType,a.Node.TEXT_NODE))bu(bI);else if(z.Equals(bI.nodeType,a.Node.ELEMENT_NODE))bE(bI);bG=1;bH=bH;bI=b9;}else return null;}}function bC(bG,bH){var bI,bJ,bL,bM,bN;function bK(bO,bP){var bQ,bR,bS,bT,bU,bV;if(bL==="title"?bH.hasChildNodes():false){bS=(bQ=bH.textContent,a.jQuery.parseHTML(bQ));bR=bH.removeChild(bH.firstChild);for(bT=0,bU=bS.length-1;bT<=bU;bT++){bV=bH.appendChild(n.get(bS,bT));}}else null;bE(bH);return bz(bH,bO,bP);}bL=bH.nodeName.toLowerCase();A.IterSelector(bG,"[ws-attr-holes]",function(bO){var bP,bQ,bR,bS,bT,bU,bV,bW;bQ=(bP=bO.getAttribute("ws-attr-holes"),S.SplitChars(bP,[32],1));for(bR=0,bS=bQ.length-1;bR<=bS;bR++){bT=n.get(bQ,bR);bO.setAttribute(bT,(bU=new a.RegExp("\\${"+bL+"}","ig"),bV=bO.getAttribute(bT),bW=bH.textContent,bU[a.Symbol.replace](bV,bW)));}});bM=bG.querySelector("[ws-hole="+bL+"]");if(z.Equals(bM,null)){bI=bG.querySelector("[ws-replace="+bL+"]");return z.Equals(bI,null)?null:(bK(bI.parentNode,bI),bJ=bI.parentNode.removeChild(bI));}else{while(bM.hasChildNodes()){bN=bM.removeChild(bM.lastChild);}bM.removeAttribute("ws-hole");return bK(bM,null);}}function bD(bG){return bB(0,bG);}function bE(bG){var bH,bI,bJ,bK;if((bH=bG.nodeName.toLowerCase(),S.StartsWith(bH,"ws-"))?!bG.hasAttribute("ws-template"):false)bD(bG);else{bt(bG);bI=bG.getAttribute("ws-template");if(bI===null){bJ=bG.getAttribute("ws-children-template");if(bJ===null)bF(bG,bG.firstChild);else{bG.removeAttribute("ws-children-template");v.PrepareTemplate(bq,{$:1,$0:bJ},function(){return A.ChildrenArray(bG);});while(bG.hasChildNodes()){bK=bG.removeChild(bG.lastChild);}}}else v.PrepareSingleTemplate(bq,{$:1,$0:bI},bG);}}function bF(bG,bH){return bB(1,bG,bH);}bt=function(bG){var bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX;function bH(bY){var bZ;bZ=bG.getAttribute(bY);bZ===null?void 0:bG.setAttribute(bY,bZ.toLowerCase());}bI=bG.attributes;bJ=[];bK=[];bL=[];for(bM=0,bN=bI.length-1;bM<=bN;bM++){bO=bI.item(bM);(((bP=bO.nodeName,S.StartsWith(bP,"ws-on"))?bO.nodeName!=="ws-onafterrender":false)?bO.nodeName!=="ws-on":false)?(bQ=bJ.push(bO.nodeName),bR=bK.push(R.string(bO.nodeName,{$:1,$0:"ws-on".length},null)+":"+bO.nodeValue.toLowerCase())):(!(bS=bO.nodeName,S.StartsWith(bS,"ws-"))?(bT=D.TextHoleRE(),new a.RegExp(bT)).test(bO.nodeValue):false)?(bO.nodeValue=(bU=(bV=D.TextHoleRE(),new a.RegExp(bV,"g")),(bW=bO.nodeValue,bU[a.Symbol.replace](bW,function(bY,bZ){return"${"+bZ.toLowerCase()+"}";}))),bX=bL.push(bO.nodeName)):void 0;}!(bK.length==0)?bG.setAttribute("ws-on",S.concat(" ",bK)):void 0;!(bL.length==0)?bG.setAttribute("ws-attr-holes",S.concat(" ",bL)):void 0;bH("ws-hole");bH("ws-replace");bH("ws-attr");bH("ws-onafterrender");bH("ws-var");n.iter(function(bY){bG.removeAttribute(bY);},bJ);};bu=function(bG){var bH,bI,bJ,bK,bL,bM,bN,bO,bP;bH=null;bI=0;bL=bG.textContent;bM=(bK=D.TextHoleRE(),new a.RegExp(bK,"g"));while(bH=bM.exec(bL),bH!==null){bN=bG.parentNode.insertBefore(a.document.createTextNode(R.string(bL,{$:1,$0:bI},{$:1,$0:bM.lastIndex-n.get(bH,0).length-1})),bG);bI=bM.lastIndex;bO=a.document.createElement("span");bO.setAttribute("ws-replace",n.get(bH,1).toLowerCase());bP=bG.parentNode.insertBefore(bO,bG);}bM.lastIndex=0;bG.textContent=R.string(bL,{$:1,$0:bI},null);};bv=function(bG,bH){function bI(bJ){A.IterSelector(bG,"["+bJ+"]",function(bK){var bL,bM;bL=(bM=null,[bH.TryGetValue(bK.getAttribute(bJ).toLowerCase(),{get:function(){return bM;},set:function(bN){bM=bN;}}),bM]);bL[0]?bK.setAttribute(bJ,bL[1]):void 0;});}bI("ws-hole");bI("ws-replace");bI("ws-attr");bI("ws-onafterrender");bI("ws-var");A.IterSelector(bG,"[ws-on]",function(bJ){var bK,bL,bM;bJ.setAttribute("ws-on",(bK=(bL=function(bN){var bO,bP,bQ,bR;bO=S.SplitChars(bN,[58],1);bP=(bQ=null,[bH.TryGetValue(n.get(bO,1),{get:function(){return bQ;},set:function(bS){bQ=bS;}}),bQ]);return bP[0]?(bR=bP[1],n.get(bO,0)+":"+bR):bN;},function(bN){return n.map(bL,bN);}((bM=bJ.getAttribute("ws-on"),S.SplitChars(bM,[32],1)))),S.concat(" ",bK)));});return A.IterSelector(bG,"[ws-attr-holes]",function(bJ){var bK,bL,bM,bN;bL=(bK=bJ.getAttribute("ws-attr-holes"),S.SplitChars(bK,[32],1));for(bM=0,bN=bL.length-1;bM<=bN;bM++)(function(){var bO,bP,bQ;bO=n.get(bL,bM);return bJ.setAttribute(bO,(bP=bJ.getAttribute(bO),((bQ=function(bR,bS){var bT,bU,bV,bW;bT=i.KeyValue(bS);bU=bT[1];bV=bT[0];bW=new a.RegExp("\\${"+bV+"}","ig");return bW[a.Symbol.replace](bR,"${"+bU+"}");},(bp.Curried3(F.fold))(bQ))(bP))(bH)));}());});};bw=function(bG,bH){var bI,bJ,bK,bL,bM;bt(bH);bI=bH.nodeName.toLowerCase();bJ=bG.querySelector("[ws-attr="+bI+"]");if(z.Equals(bJ,null))return a.console.warn.apply(a.console,["Filling non-existent attr hole"].concat([bI]));else{bJ.removeAttribute("ws-attr");for(bK=0,bL=bH.attributes.length-1;bK<=bL;bK++){bM=bH.attributes.item(bK);(bM.name==="class"?bJ.hasAttribute("class"):false)?bJ.setAttribute("class",bJ.getAttribute("class")+" "+bM.nodeValue):bJ.setAttribute(bM.name,bM.nodeValue);}return;}};bx=function(bG,bH){function bI(bJ){A.IterSelector(bG,"["+bJ+"]",function(bK){if(!bH.Contains(bK.getAttribute(bJ)))bK.removeAttribute(bJ);});}bI("ws-attr");bI("ws-onafterrender");bI("ws-var");A.IterSelector(bG,"[ws-hole]",function(bJ){var bK;if(!bH.Contains(bJ.getAttribute("ws-hole"))){bJ.removeAttribute("ws-hole");while(bJ.hasChildNodes()){bK=bJ.removeChild(bJ.lastChild);}}});A.IterSelector(bG,"[ws-replace]",function(bJ){var bK;if(!bH.Contains(bJ.getAttribute("ws-replace"))){bK=bJ.parentNode.removeChild(bJ);}});A.IterSelector(bG,"[ws-on]",function(bJ){var bK,bL,bM;bJ.setAttribute("ws-on",(bK=(bL=function(bN){var bO;bO=S.SplitChars(bN,[58],1);return bH.Contains(n.get(bO,1));},function(bN){return n.filter(bL,bN);}((bM=bJ.getAttribute("ws-on"),S.SplitChars(bM,[32],1)))),S.concat(" ",bK)));});return A.IterSelector(bG,"[ws-attr-holes]",function(bJ){var bK,bL,bM,bN,bO,bP,bQ,bR;bL=(bK=bJ.getAttribute("ws-attr-holes"),S.SplitChars(bK,[32],1));for(bM=0,bN=bL.length-1;bM<=bN;bM++){bO=n.get(bL,bM);bJ.setAttribute(bO,(bP=(bQ=D.TextHoleRE(),new a.RegExp(bQ,"g")),(bR=bJ.getAttribute(bO),bP[a.Symbol.replace](bR,function(bS,bT){return bH.Contains(bT)?bS:"";}))));}});};by=function(bG,bH){var bI,bJ;bI=bG.querySelector("[ws-replace]");return z.Equals(bI,null)?(a.console.warn.apply(a.console,["Filling non-existent text hole"].concat([br])),null):(bJ=bI.parentNode.replaceChild(new a.Text(bH),bI),{$:1,$0:bI.getAttribute("ws-replace")});};bz=function(bG,bH,bI){while(true)if(bG.hasChildNodes())bI=bH.insertBefore(bG.lastChild,bI);else return null;};bA=v.FakeRoot(bs);D.LoadedTemplates().set_Item(v.ComposeName(bq,br),bA);n.length(bs)>0?bF(bA,n.get(bs,0)):void 0;};v.TextNode=function(bq){var br,bs;br={$:5,$0:A.CreateText(bq)};bs=C.Const();return v.Mk(br,bs);};v.TextView=function(bq){var br,bs,bt;br=D.CreateTextNode();bs={$:4,$0:br};return function(bu){return v.Mk(bs,bu);}((bt=function(bu){D.UpdateTextNode(br,bu);},function(bu){return C.Map(bt,bu);}(bq)));};v.Mk=function(bq,br){return new v.New(bq,br);};v.Append=function(bq,br){var bs,bt,bu,bv;bs=(bt=bq.updates,(bu=br.updates,C.Map2Unit(bt,bu)));bv={$:0,$0:bq.docNode,$1:br.docNode};return v.Mk(bv,bs);};v.FakeRoot=function(bq){var br,bs,bt,bu;br=a.document.createElement("div");for(bs=0,bt=bq.length-1;bs<=bt;bs++){bu=br.appendChild(n.get(bq,bs));}return br;};v.New=bp.Ctor(function(bq,br){this.docNode=bq;this.updates=br;},v);w.TryParse=function(bq,br){return ba.TryParse(bq,-2147483648,2147483647,br);};y=x.Dictionary=bp.Class({TryGetValue:function(bq,br){var bs,bt,bu,bv,bw;bs=this;bt=this.hash(bq);bu=this.data[bt];return bu?(bv=(bw=function(bx){var by,bz;by=i.KeyValue(bx);bz=by[1];return bs.equals.apply(null,[by[0],bq])?{$:1,$0:bz}:null;},function(bx){return n.tryPick(bw,bx);}(bu)),(bv!=null?bv.$==1:false)?(br.set(bv.$0),true):false):false;},Remove:function(bq){return this.remove(bq);},ContainsKey:function(bq){var br,bs,bt,bu;br=this;bs=this.hash(bq);bt=this.data[bs];return bt?(bu=function(bv){return br.equals.apply(null,[(i.KeyValue(bv))[0],bq]);},function(bv){return n.exists(bu,bv);}(bt)):false;},set_Item:function(bq,br){this.set(bq,br);},remove:function(bq){var br,bs,bt,bu,bv;br=this;bs=this.hash(bq);bt=this.data[bs];return bt?(bu=(bv=function(bw){return!br.equals.apply(null,[(i.KeyValue(bw))[0],bq]);},function(bw){return n.filter(bv,bw);}(bt)),n.length(bu)<bt.length?(this.count=this.count-1,this.data[bs]=bu,true):false):false;},get_Item:function(bq){return this.get(bq);},set:function(bq,br){var bs,bt,bu,bv,bw,bx;bs=this;bt=this.hash(bq);bu=this.data[bt];bu?(bv=(bw=function(by){return bs.equals.apply(null,[(i.KeyValue(by))[0],bq]);},function(by){return n.tryFindIndex(bw,by);}(bu)),bv==null?(this.count=this.count+1,bx=bu.push({K:bq,V:br})):bu[bv.$0]={K:bq,V:br}):(this.count=this.count+1,this.data[bt]=new a.Array({K:bq,V:br}));},get:function(bq){var br,bs,bt,bu;br=this;bs=this.hash(bq);bt=this.data[bs];return bt?(bu=function(bv){var bw,bx;bw=i.KeyValue(bv);bx=bw[1];return br.equals.apply(null,[bw[0],bq])?{$:1,$0:bx}:null;},function(bv){return n.pick(bu,bv);}(bt)):_3.notPresent();},GetEnumerator:function(){return V.Get0(this);},GetEnumerator0:function(){var bq;bq=E.GetFieldValues(this.data);return V.Get0(n.concat(bq));}},null,y);y.New$5=bp.Ctor(function(){y.New$6.call(this,[],z.Equals,z.Hash);},y);y.New$6=bp.Ctor(function(bq,br,bs){var bt,bu;this.equals=br;this.hash=bs;this.count=0;this.data=[];bt=V.Get(bq);try{while(bt.MoveNext()){bu=bt.Current();this.set(bu.K,bu.V);}}finally{if("Dispose"in bt)bt.Dispose();}},y);m.FromSeq=function(bq){return m.Create(a.id,bq);};m.Create=function(bq,br){var bs;bs=K.InMemory(n.ofSeq(br));return m.CreateWithStorage(bq,bs);};m.CreateWithStorage=function(bq,br){return new m.New(bq,br);};n.tryFindIndex=function(bq,br){var bs,bt;bs=null;bt=0;while(bt<br.length?bs==null:false){bq(br[bt])?bs={$:1,$0:bt}:void 0;bt=bt+1;}return bs;};n.tryPick=function(bq,br){var bs,bt,bu;bs=null;bt=0;while(bt<br.length?bs==null:false){bu=bq(br[bt]);(bu!=null?bu.$==1:false)?bs=bu:void 0;bt=bt+1;}return bs;};n.choose=function(bq,br){var bs,bt,bu,bv;bs=[];for(bt=0,bu=br.length-1;bt<=bu;bt++){bv=bq(br[bt]);bv==null?void 0:bs.push(bv.$0);}return bs;};n.foldBack=function(bq,br,bs){var bt,bu,bv,bw,bx;bt=bs;bv=br.length;for(bw=1,bx=bv;bw<=bx;bw++)bt=bq(br[bv-bw],bt);return bt;};n.iter=function(bq,br){var bs,bt;for(bs=0,bt=br.length-1;bs<=bt;bs++)bq(br[bs]);};n.ofSeq=function(bq){var br,bs;if(bq instanceof a.Array)return bq.slice();else if(bq instanceof l)return n.ofList(bq);else{br=[];bs=V.Get(bq);try{while(bs.MoveNext())br.push(bs.Current());return br;}finally{if("Dispose"in bs)bs.Dispose();}}};n.exists=function(bq,br){var bs,bt,bu,bv;bs=false;bt=0;bv=n.length(br);while(!bs?bt<bv:false)if(bq(br[bt]))bs=true;else bt=bt+1;return bs;};n.map=function(bq,br){var bs,bt,bu,bv;bt=(bs=br.length,new a.Array(bs));for(bu=0,bv=br.length-1;bu<=bv;bu++)bt[bu]=bq(br[bu]);return bt;};n.filter=function(bq,br){var bs,bt,bu;bs=[];for(bt=0,bu=br.length-1;bt<=bu;bt++)if(bq(br[bt]))bs.push(br[bt]);return bs;};n.ofList=function(bq){var br,bs;bs=[];br=bq;while(!(br.$==0)){bs.push(k.head(br));br=k.tail(br);}return bs;};n.forall=function(bq,br){var bs,bt,bu,bv;bs=true;bt=0;bv=n.length(br);while(bs?bt<bv:false)if(bq(br[bt]))bt=bt+1;else bs=false;return bs;};n.concat=function(bq){var br;br=n.ofSeq(bq);return a.Array.prototype.concat.apply([],br);};n.pick=function(bq,br){var bs;bs=n.tryPick(bq,br);return bs==null?i.FailWith("KeyNotFoundException"):bs.$0;};n.create=function(bq,br){var bs,bt,bu;bs=new a.Array(bq);for(bt=0,bu=bq-1;bt<=bu;bt++)bs[bt]=br;return bs;};n.init=function(bq,br){var bs,bt,bu;bq<0?i.FailWith("Negative size given."):null;bs=new a.Array(bq);for(bt=0,bu=bq-1;bt<=bu;bt++)bs[bt]=br(bt);return bs;};z.Equals=function(bq,br){var bs,bt,bu,bv;if(bq===br)return true;else{bs=typeof bq;if(bs=="object"){if(((bq===null?true:bq===void 0)?true:br===null)?true:br===void 0)return false;else if("Equals"in bq)return bq.Equals(br);else if(bq instanceof a.Array?br instanceof a.Array:false)return z.arrayEquals(bq,br);else if(bq instanceof a.Date?br instanceof a.Date:false)return z.dateEquals(bq,br);else{bt=[true];for(var bw in bq)if(function(bx){bt[0]=!bq.hasOwnProperty(bx)?true:br.hasOwnProperty(bx)?z.Equals(bq[bx],br[bx]):false;return!bt[0];}(bw))break;if(bt[0]){for(var bx in br)if(function(by){bt[0]=!br.hasOwnProperty(by)?true:bq.hasOwnProperty(by);return!bt[0];}(bx))break;}return bt[0];}}else return bs=="function"?"$Func"in bq?bq.$Func===br.$Func?bq.$Target===br.$Target:false:("$Invokes"in bq?"$Invokes"in br:false)?z.arrayEquals(bq.$Invokes,br.$Invokes):false:false;}};z.arrayEquals=function(bq,br){var bs,bt;if(n.length(bq)===n.length(br)){bs=true;bt=0;while(bs?bt<n.length(bq):false){!z.Equals(n.get(bq,bt),n.get(br,bt))?bs=false:void 0;bt=bt+1;}return bs;}else return false;};z.dateEquals=function(bq,br){return bq.getTime()===br.getTime();};z.Hash=function(bq){var br;br=typeof bq;return br=="function"?0:br=="boolean"?bq?1:0:br=="number"?bq:br=="string"?z.hashString(bq):br=="object"?bq==null?0:bq instanceof a.Array?z.hashArray(bq):z.hashObject(bq):0;};z.hashString=function(bq){var br,bs,bt;if(bq===null)return 0;else{br=5381;for(bs=0,bt=bq.length-1;bs<=bt;bs++)br=z.hashMix(br,bq.charCodeAt(bs)<<0);return br;}};z.hashArray=function(bq){var br,bs,bt;br=-34948909;for(bs=0,bt=n.length(bq)-1;bs<=bt;bs++)br=z.hashMix(br,z.Hash(n.get(bq,bs)));return br;};z.hashObject=function(bq){var br,bs,bt;if("GetHashCode"in bq)return bq.GetHashCode();else{br=z.hashMix;bs=[0];for(var bu in bq)if(function(bv){bs[0]=br(br(bs[0],z.hashString(bv)),z.Hash(bq[bv]));return false;}(bu))break;return bs[0];}};z.hashMix=function(bq,br){return(bq<<5)+bq+br;};z.Compare=function(bq,br){var bs,bt,bu,bv,bw,bx;if(bq===br)return 0;else{bt=typeof bq;switch(bt=="function"?1:bt=="boolean"?2:bt=="number"?2:bt=="string"?2:bt=="object"?3:0){case 0:return typeof br=="undefined"?0:-1;break;case 1:return i.FailWith("Cannot compare function values.");break;case 2:return bq<br?-1:1;break;case 3:if(bq===null)bu=-1;else if(br===null)bu=1;else if("CompareTo"in bq)bu=bq.CompareTo(br);else if("CompareTo0"in bq)bu=bq.CompareTo0(br);else if(bq instanceof a.Array?br instanceof a.Array:false)bu=z.compareArrays(bq,br);else if(bq instanceof a.Date?br instanceof a.Date:false)bu=z.compareDates(bq,br);else{bv=[0];for(var by in bq)if(function(bz){return!bq.hasOwnProperty(bz)?false:!br.hasOwnProperty(bz)?(bv[0]=1,true):(bv[0]=z.Compare(bq[bz],br[bz]),bv[0]!==0);}(by))break;if(bv[0]===0){for(var bz in br)if(function(bA){return!br.hasOwnProperty(bA)?false:!bq.hasOwnProperty(bA)?(bv[0]=-1,true):false;}(bz))break;}bu=bv[0];}return bu;break;}}};z.compareArrays=function(bq,br){var bs,bt;if(n.length(bq)<n.length(br))return -1;else if(n.length(bq)>n.length(br))return 1;else{bs=0;bt=0;while(bs===0?bt<n.length(bq):false){bs=z.Compare(n.get(bq,bt),n.get(br,bt));bt=bt+1;}return bs;}};z.compareDates=function(bq,br){return i.Compare(bq.getTime(),br.getTime());};A.Doc=function(){I.$cctor();return I.Doc;};A.ChildrenArray=function(bq){var br,bs,bt,bu;br=[];for(bs=0,bt=bq.childNodes.length-1;bs<=bt;bs++){bu=br.push(bq.childNodes[bs]);}return br;};A.IterSelector=function(bq,br,bs){var bt,bu,bv;bt=bq.querySelectorAll(br);for(bu=0,bv=bt.length-1;bu<=bv;bu++)bs(bt[bu]);};A.CreateText=function(bq){return A.Doc().createTextNode(bq);};A.SetAttr=function(bq,br,bs){bq.setAttribute(br,bs);};A.InsertAt=function(bq,br,bs){var bt,bu;!(bs.parentNode===bq?br===(bt=bs.nextSibling,z.Equals(bt,null)?null:bt):false)?bu=bq.insertBefore(bs,br):void 0;};A.RemoveNode=function(bq,br){var bs;if(br.parentNode===bq){bs=bq.removeChild(br);}};B.$cctor=bp.Cctor(function(){B.counter=0;B.$cctor=a.ignore;});C.MapSeqCached=function(bq,br){return C.MapSeqCachedBy(a.id,bq,br);};C.Sink=function(bq,br){function bs(){var bt;bt=br();p.When(bt,bq,function(){_0.Schedule(bs);});}_0.Schedule(bs);};C.MapSeqCachedBy=function(bq,br,bs){var bt,bu;bt=[new y.New$5()];bu=function(bv){var bw,bx,by,bz;bw=bt[0];bx=new y.New$5();by=(bz=function(bA){var bB,bC;bB=bq(bA);bC=bw.ContainsKey(bB)?bw.get_Item(bB):br(bA);bx.set_Item(bB,bC);return bC;},function(bA){return T.mapInPlace(bz,bA);}(n.ofSeq(bv)));bt[0]=bx;return by;};return function(bv){return C.Map(bu,bv);}(bs);};C.Map=function(bq,br){return C.CreateLazy(function(){var bs;bs=br();return p.Map(bq,bs);});};C.Map3=function(bq,br,bs,bt){return C.CreateLazy(function(){var bu,bv,bw;bu=br();bv=bs();bw=bt();return p.Map3(bq,bu,bv,bw);});};C.Sequence=function(bq){return C.CreateLazy(function(){var br;return p.Sequence((br=function(bs){return bs();},function(bs){return F.map(br,bs);}(bq)));});};C.Map2=function(bq,br,bs){return C.CreateLazy(function(){var bt,bu;bt=br();bu=bs();return p.Map2(bq,bt,bu);});};C.Const=function(bq){var br;br=p.CreateForever(bq);return function(){return br;};};C.Map2Unit=function(bq,br){return C.CreateLazy(function(){var bs,bt;bs=bq();bt=br();return p.Map2Unit(bs,bt);});};C.CreateLazy=function(bq){var br;br={c:null,o:bq};return function(){var bs;bs=br.c;return bs===null?(bs=br.o(),br.c=bs,p.IsForever(bs)?br.o=null:p.WhenObsolete(bs,function(){br.c=null;}),bs):bs;};};C.Bind=function(bq,br){return C.Join(C.Map(bq,br));};C.Join=function(bq){return C.CreateLazy(function(){return p.Join(bq());});};D.LoadedTemplates=function(){L.$cctor();return L.LoadedTemplates;};D.LinkElement=function(bq,br){var bs;bs=D.InsertDoc(bq,br,null);};D.CreateRunState=function(bq,br){return X.New(Y.get_Empty(),D.CreateElemNode(bq,M.EmptyAttr(),br));};D.PerformAnimatedUpdate=function(bq,br){var bs;return Z.get_UseAnimations()?_7.Delay(function(){var bt,bu,bv,bw,bx;bt=Y.FindAll(br);bu=D.ComputeChangeAnim(bq,bt);bv=D.ComputeEnterAnim(bq,bt);bw=D.ComputeExitAnim(bq,bt);bx=Z.Play(Z.Append(bu,bw));return _7.Bind(bx,function(){D.SyncElemNode(bq.Top);return _7.Bind(Z.Play(bv),function(){bq.PreviousNodes=bt;return _7.Return(null);});});}):(bs=function(bt){var bu;bu=a.requestAnimationFrame(function(){D.SyncElemNode(bq.Top);bt();});},_7.FromContinuations(function(bt,bu,bv){return bs.apply(null,[bt,bu,bv]);}));};D.InsertBeforeDelim=function(bq,br){var bs,bt,bu;bs=bq.parentNode;bt=a.document.createTextNode("");bu=bs.insertBefore(bt,bq);D.LinkPrevElement(bq,br);return bt;};D.TextHoleRE=function(){L.$cctor();return L.TextHoleRE;};D.InsertDoc=function(bq,br,bs){var bt,bu,bv,bw,bx,by,bz;return br.$==1?(bt=br.$0,D.InsertNode(bq,bt.El,bs)):br.$==2?(bu=br.$0,(bu.Dirty=false,D.InsertDoc(bq,bu.Current,bs))):br.$==3?bs:br.$==4?(bv=br.$0,D.InsertNode(bq,bv.Text,bs)):br.$==5?(bw=br.$0,D.InsertNode(bq,bw,bs)):br.$==6?(bx=br.$0,n.foldBack(function(bA,bB){return bA.constructor===a.Object?D.InsertDoc(bq,bA,bB):D.InsertNode(bq,bA,bB);},bx.Els,bs)):(by=br.$1,(bz=br.$0,D.InsertDoc(bq,bz,D.InsertDoc(bq,by,bs))));};D.CreateElemNode=function(bq,br,bs){var bt;D.LinkElement(bq,bs);bt=M.Insert(bq,br);return O.New(bt,bs,null,bq,r.Int(),bp.GetOptional(bt.OnAfterRender));};D.ComputeChangeAnim=function(bq,br){var bs,bt,bu,bv,bw;bs=(bt=function(bx){return M.HasChangeAnim(bx.Attr);},function(bx){return Y.Filter(bt,bx);});return Z.Concat((bu=function(bx){return M.GetChangeAnim(bx.Attr);},function(bx){return n.map(bu,bx);}(Y.ToArray((bv=bs(bq.PreviousNodes),(bw=bs(br),Y.Intersect(bv,bw)))))));};D.ComputeEnterAnim=function(bq,br){var bs,bt,bu,bv;return Z.Concat((bs=function(bw){return M.GetEnterAnim(bw.Attr);},function(bw){return n.map(bs,bw);}(Y.ToArray((bt=(bu=function(bw){return M.HasEnterAnim(bw.Attr);},function(bw){return Y.Filter(bu,bw);}(br)),(bv=bq.PreviousNodes,Y.Except(bv,bt)))))));};D.ComputeExitAnim=function(bq,br){var bs,bt,bu;return Z.Concat((bs=function(bv){return M.GetExitAnim(bv.Attr);},function(bv){return n.map(bs,bv);}(Y.ToArray((bt=(bu=function(bv){return M.HasExitAnim(bv.Attr);},function(bv){return Y.Filter(bu,bv);}(bq.PreviousNodes)),Y.Except(br,bt))))));};D.SyncElemNode=function(bq){D.SyncElement(bq);D.Sync(bq.Children);D.AfterRender(bq);};D.CreateEmbedNode=function(){return{Current:H.EmptyDoc,Dirty:false};};D.UpdateEmbedNode=function(bq,br){bq.Current=br;bq.Dirty=true;};D.CreateTextNode=function(){return{Text:A.CreateText(""),Dirty:false,Value:""};};D.UpdateTextNode=function(bq,br){bq.Value=br;bq.Dirty=true;};D.LinkPrevElement=function(bq,br){var bs;bs=D.InsertDoc(bq.parentNode,br,bq);};D.InsertNode=function(bq,br,bs){A.InsertAt(bq,bs,br);return br;};D.SyncElement=function(bq){function br(bs){function bt(bu){var bv,bw,bx;return bu.$==0?(bv=bu.$1,bt(bu.$0)?true:bt(bv)):bu.$==2?(bw=bu.$0,bw.Dirty?true:bt(bw.Current)):bu.$==6?(bx=bu.$0,bx.Dirty?true:n.exists(br,bx.Holes)):false;}return bt(bs.Children);}M.Sync(bq.El,bq.Attr);br(bq)?D.DoSyncElement(bq):void 0;};D.Sync=function(bq){var br,bs,bt,bu,bv;if(bq.$==1)D.SyncElemNode(bq.$0);else if(bq.$==2){br=bq.$0;D.Sync(br.Current);}else if(bq.$==3);else if(bq.$==5);else if(bq.$==4){bs=bq.$0;bs.Dirty?(bs.Text.nodeValue=bs.Value,bs.Dirty=false):void 0;}else if(bq.$==6){bt=bq.$0;n.iter(function(bw){D.SyncElemNode(bw);},bt.Holes);n.iter(function(bw){var bx,by;bx=bw[0];by=bw[1];M.Sync(bx,by);},bt.Attrs);D.AfterRender(bt);}else{bu=bq.$1;bv=bq.$0;D.Sync(bv);D.Sync(bu);}};D.AfterRender=function(bq){var br,bs;br=bp.GetOptional(bq.Render);(br!=null?br.$==1:false)?(bs=br.$0,bs(bq.El),bp.SetOptional(bq,"Render",null)):void 0;};D.DoSyncElement=function(bq){var br,bs,bt,bu,bv,bw,bx,by,bz,bA;function bB(bC,bD){var bE,bF;return bC.$==1?bC.$0.El:bC.$==2?(bE=bC.$0,bE.Dirty?(bE.Dirty=false,D.InsertDoc(br,bE.Current,bD)):bB(bE.Current,bD)):bC.$==3?bD:bC.$==4?bC.$0.Text:bC.$==5?bC.$0:bC.$==6?(bF=bC.$0,(bF.Dirty?bF.Dirty=false:void 0,n.foldBack(function(bG,bH){return bG.constructor===a.Object?bB(bG,bH):bG;},bF.Els,bD))):bB(bC.$0,bB(bC.$1,bD));}br=bq.El;bs=bi.DocChildren(bq);bt=(bu=(bv=bq.El,(bw=bp.GetOptional(bq.Delimiters),bi.Children(bv,bw))),bi.Except(bs,bu));bx=(by=bq.El,function(bC){A.RemoveNode(by,bC);});bi.Iter(bx,bt);bA=bB(bq.Children,(bz=bp.GetOptional(bq.Delimiters),(bz!=null?bz.$==1:false)?bz.$0[1]:null));};E.GetFieldValues=function(bq){var br,bs;br=[];for(var bt in bq)br.push(bq[bt]);return br;};F.iter=function(bq,br){var bs;bs=V.Get(br);try{while(bs.MoveNext())bq(bs.Current());}finally{if("Dispose"in bs)bs.Dispose();}};F.fold=function(bq,br,bs){var bt,bu;bt=br;bu=V.Get(bs);try{while(bu.MoveNext())bt=bq(bt,bu.Current());return bt;}finally{if("Dispose"in bu)bu.Dispose();}};F.map=function(bq,br){return{GetEnumerator:function(){var bs;bs=V.Get(br);return new _.New(null,null,function(bt){return bs.MoveNext()?(bt.c=bq(bs.Current()),true):false;},function(){bs.Dispose();});}};};F.distinctBy=function(bq,br){return{GetEnumerator:function(){var bs,bt;bs=V.Get(br);bt=new _2.New$3();return new _.New(null,null,function(bu){var bv,bw;if(bs.MoveNext()){bv=bs.Current();bw=bt.Add(bq(bv));while(!bw?bs.MoveNext():false){bv=bs.Current();bw=bt.Add(bq(bv));}return bw?(bu.c=bv,true):false;}else return false;},function(){bs.Dispose();});}};};F.forall=function(bq,br){return!F.exists(function(bs){return!bq(bs);},br);};F.max=function(bq){return F.reduce(function(br,bs){return z.Compare(br,bs)>=0?br:bs;},bq);};F.exists=function(bq,br){var bs,bt;bs=V.Get(br);try{bt=false;while(!bt?bs.MoveNext():false)bt=bq(bs.Current());return bt;}finally{if("Dispose"in bs)bs.Dispose();}};F.reduce=function(bq,br){var bs,bt;bs=V.Get(br);try{if(!bs.MoveNext())i.FailWith("The input sequence was empty");bt=bs.Current();while(bs.MoveNext())bt=bq(bt,bs.Current());return bt;}finally{if("Dispose"in bs)bs.Dispose();}};H.EmptyDoc={$:3};I.$cctor=bp.Cctor(function(){I.Doc=a.document;I.$cctor=a.ignore;});J.StartProcessor=function(bq){var br;function bs(){return _7.Delay(function(){return _7.Bind(bq,function(){var bt,bu;bt=br[0];return z.Equals(bt,1)?(br[0]=0,_7.Return(null)):z.Equals(bt,2)?(br[0]=1,bu=bs(),_7.Bind(bu,function(){return _7.Return(null);})):_7.Return(null);});});}br=[0];return function(){var bt,bu;bt=br[0];z.Equals(bt,0)?(br[0]=1,bu=bs(),_7.Start(bu,null)):z.Equals(bt,1)?br[0]=2:void 0;};};K.InMemory=function(bq){return new _1.New(bq);};L.$cctor=bp.Cctor(function(){L.LoadedTemplates=new y.New$5();L.TextHoleRE="\\${([^}]+)}";L.$cctor=a.ignore;});M.Insert=function(bq,br){var bs,bt,bu;function bv(bw){var bx;if(!(bw===null))if(bw!=null?bw.$==1:false)bs.push(bw.$0);else if(bw!=null?bw.$==2:false){bx=bw.$1;bv(bw.$0);bv(bx);}else if(bw!=null?bw.$==3:false)bw.$0(bq);else if(bw!=null?bw.$==4:false)bt.push(bw.$0);}bs=[];bt=[];bv(br);bu=bs.slice(0);return _5.New(bq,M.Flags(br),bu,bt.length===0?null:{$:1,$0:function(bw){F.iter(function(bx){bx(bw);},bt);}});};M.Updates=function(bq){var br,bs;br=bq.DynNodes;bs=C.Const();return T.MapTreeReduce(function(bt){return bt.NChanged();},bs,C.Map2Unit,br);};M.Empty=function(bq){return _5.New(bq,0,[],null);};M.Flags=function(bq){return(bq!==null?bq.hasOwnProperty("flags"):false)?bq.flags:0;};M.Static=function(bq){return new Q({$:3,$0:bq});};M.Dynamic=function(bq,br){return new Q({$:1,$0:new bb.New(bq,br)});};M.EmptyAttr=function(){bc.$cctor();return bc.EmptyAttr;};M.HasChangeAnim=function(bq){var br;br=4;return(bq.DynFlags&br)===br;};M.GetChangeAnim=function(bq){return M.GetAnim(bq,function(br,bs){return br.NGetChangeAnim(bs);});};M.HasEnterAnim=function(bq){var br;br=1;return(bq.DynFlags&br)===br;};M.GetEnterAnim=function(bq){return M.GetAnim(bq,function(br,bs){return br.NGetEnterAnim(bs);});};M.HasExitAnim=function(bq){var br;br=2;return(bq.DynFlags&br)===br;};M.GetExitAnim=function(bq){return M.GetAnim(bq,function(br,bs){return br.NGetExitAnim(bs);});};M.AppendTree=function(bq,br){var bs;return bq===null?br:br===null?bq:(bs=new Q({$:2,$0:bq,$1:br}),(M.SetFlags(bs,M.Flags(bq)|M.Flags(br)),bs));};M.GetAnim=function(bq,br){var bs;return Z.Concat((bs=function(bt){return br(bt,bq.DynElem);},function(bt){return n.map(bs,bt);}(bq.DynNodes)));};M.Sync=function(bq,br){var bs;bs=function(bt){bt.NSync(bq);};(function(bt){n.iter(bs,bt);}(br.DynNodes));};M.SetFlags=function(bq,br){bq.flags=br;};N=g.CheckedInput=bp.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,N);O=g.DocElemNode=bp.Class({Equals:function(bq){return this.ElKey===bq.ElKey;},GetHashCode:function(){return this.ElKey;}},null,O);O.New=function(bq,br,bs,bt,bu,bv){var bw;return new O((bw={Attr:bq,Children:br,El:bt,ElKey:bu},(bp.SetOptional(bw,"Delimiters",bs),bp.SetOptional(bw,"Render",bv),bw)));};P.Handler=function(bq,br){return M.Static(function(bs){bs.addEventListener(bq,function(bt){return(br(bs))(bt);},false);});};P.OnAfterRender=function(bq){return new Q({$:4,$0:bq});};P.Value=function(bq){var br,bs;return P.CustomValue(bq,a.id,(br=a.id,(bs=function(bt){return{$:1,$0:bt};},function(bt){return bs(br(bt));})));};P.Checked=function(bq){var br;br=function(bs){return!z.Equals(bq.RVal(),bs.checked)?bq.set_RVal(bs.checked):null;};return Q.Concat([P.DynamicProp("checked",bq.RView()),P.Handler("change",function(bs){return function(bt){return br(bs,bt);};}),P.Handler("click",function(bs){return function(bt){return br(bs,bt);};})]);};P.IntValue=function(bq){return P.CustomVar(bq,function(br,bs){var bt;bt=bs.get_Input();return br.value!==bt?void(br.value=bt):null;},function(br){var bs,bt,bu,bv;bs=br.value;return{$:1,$0:_6.isBlank(bs)?(br.checkValidity?br.checkValidity():true)?new N({$:2,$0:bs}):new N({$:1,$0:bs}):(bt=(bu=0,[w.TryParse(bs,{get:function(){return bu;},set:function(bw){bu=bw;}}),bu]),bt[0]?(bv=bt[1],new N({$:0,$0:bv,$1:bs})):new N({$:1,$0:bs}))};});};P.IntValueUnchecked=function(bq){return P.CustomValue(bq,a.String,function(br){var bs;return _6.isBlank(br)?{$:1,$0:0}:(bs=+br,bs!==bs>>0?null:{$:1,$0:bs});});};P.FloatValue=function(bq){return P.CustomVar(bq,function(br,bs){var bt;bt=bs.get_Input();return br.value!==bt?void(br.value=bt):null;},function(br){var bs,bt;bs=br.value;return{$:1,$0:_6.isBlank(bs)?(br.checkValidity?br.checkValidity():true)?new N({$:2,$0:bs}):new N({$:1,$0:bs}):(bt=+bs,a.isNaN(bt)?new N({$:1,$0:bs}):new N({$:0,$0:bt,$1:bs}))};});};P.FloatValueUnchecked=function(bq){return P.CustomValue(bq,a.String,function(br){var bs;return _6.isBlank(br)?{$:1,$0:0}:(bs=+br,a.isNaN(bs)?null:{$:1,$0:bs});});};P.Dynamic=function(bq,br){return M.Dynamic(br,function(bs){return function(bt){return A.SetAttr(bs,bq,bt);};});};P.CustomValue=function(bq,br,bs){return P.CustomVar(bq,function(bt,bu){bt.value=br(bu);},function(bt){return bs(bt.value);});};P.DynamicProp=function(bq,br){return M.Dynamic(br,function(bs){return function(bt){bs[bq]=bt;};});};P.CustomVar=function(bq,br,bs){var bt,bu;bt=function(bv){return bq.RUpdM(function(bw){var bx,by,bz;bx=bs(bv);return((bx!=null?bx.$==1:false)?(bz=bx.$0,!z.Equals(bz,bw))?(by=[bx,bx.$0],true):false:false)?by[0]:null;});};bu=function(bv,bw){var bx,by,bz;bx=bs(bv);return((bx!=null?bx.$==1:false)?(bz=bx.$0,z.Equals(bz,bw))?(by=bx.$0,true):false:false)?null:br(bv,bw);};return Q.Concat([P.Handler("change",function(bv){return function(bw){return bt(bv,bw);};}),P.Handler("input",function(bv){return function(bw){return bt(bv,bw);};}),P.Handler("keypress",function(bv){return function(bw){return bt(bv,bw);};}),P.DynamicCustom(function(bv){return function(bw){return bu(bv,bw);};},bq.RView())]);};P.DynamicCustom=function(bq,br){return M.Dynamic(br,bq);};Q=g.AttrProxy=bp.Class({},null,Q);Q.Concat=function(bq){var br,bs;br=T.ofSeqNonCopying(bq);bs=M.EmptyAttr();return T.TreeReduce(bs,Q.Append,br);};Q.Create=function(bq,br){return M.Static(function(bs){A.SetAttr(bs,bq,br);});};Q.Append=function(bq,br){return M.AppendTree(bq,br);};R.string=function(bq,br,bs){return br==null?(bs!=null?bs.$==1:false)?bq.slice(0,bs.$0+1):"":bs==null?bq.slice(br.$0):bq.slice(br.$0,bs.$0+1);};S.concat=function(bq,br){return n.ofSeq(br).join(bq);};S.SplitChars=function(bq,br,bs){var bt;bt="["+S.RegexEscape(a.String.fromCharCode.apply(void 0,br))+"]";return S.Split(bq,new a.RegExp(bt),bs);};S.StartsWith=function(bq,br){return bq.substring(0,br.length)==br;};S.Replace=function(bq,br,bs){function bt(bu){var bv,bw,bx,by;bv=bu.indexOf(br);return bv!==-1?(bw=S.ReplaceOnce(bu,br,bs),(bx=bv+bs.length,(by=bv+bs.length,S.Substring(bw,0,by))+bt(bw.substring(bx)))):bu;}return bt(bq);};S.RegexEscape=function(bq){return bq.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};S.Split=function(bq,br,bs){var bt;bt=S.SplitWith(bq,br);return bs===1?n.filter(function(bu){return bu!=="";},bt):bt;};S.forall=function(bq,br){return F.forall(bq,S.protect(br));};S.ReplaceOnce=function(bq,br,bs){return bq.replace(br,bs);};S.SplitWith=function(bq,br){return bq.split(br);};S.protect=function(bq){return bq===null?"":bq;};S.Substring=function(bq,br,bs){return bq.substr(br,bs);};T.TreeReduce=function(bq,br,bs){var bt;function bu(bv,bw){var bx,by;return bw<=0?bq:(bw===1?(bv>=0?bv<bt:false)?true:false:false)?n.get(bs,bv):(by=bw/2>>0,br(bu(bv,by),bu(bv+by,bw-by)));}bt=n.length(bs);return bu(0,bt);};T.mapInPlace=function(bq,br){var bs,bt;for(bs=0,bt=br.length-1;bs<=bt;bs++)br[bs]=bq(br[bs]);return br;};T.ofSeqNonCopying=function(bq){var br,bs,bt;if(bq instanceof a.Array)return bq;else if(bq instanceof l)return n.ofList(bq);else if(bq===null)return[];else{br=[];bs=V.Get(bq);try{while(bs.MoveNext()){bt=br.push(bs.Current());}return br;}finally{if("Dispose"in bs)bs.Dispose();}}};T.MapTreeReduce=function(bq,br,bs,bt){var bu;function bv(bw,bx){var by,bz;return bx<=0?br:(bx===1?(bw>=0?bw<bu:false)?true:false:false)?bq(n.get(bt,bw)):(bz=bx/2>>0,bs(bv(bw,bz),bv(bw+bz,bx-bz)));}bu=n.length(bt);return bv(0,bu);};U=g.Elt=bp.Class({},v,U);U.TreeNode=function(bq,br){var bs,bt,bu,bv,bw,bx,by,bz;bs=h.Create$1(br);bt=(bu=(bv=(bw=function(bA){return bA[1];},function(bA){return M.Updates(bw(bA));}),function(bA){return n.map(bv,bA);}(bq.Attrs)),(bx=C.Const(),T.TreeReduce(bx,C.Map2Unit,bu)));by=(bz=bs.v,C.Bind(function(bA){return C.Map2Unit(bt,bA);},bz));return new U.New$1({$:6,$0:bq},by,n.get(bq.Els,0),bs);};U.New$1=bp.Ctor(function(bq,br,bs,bt){v.New.call(this,bq,br);this.docNode$1=bq;this.updates$1=br;this.elt=bs;this.rvUpdates=bt;},U);V.Get=function(bq){return bq instanceof a.Array?V.ArrayEnumerator(bq):z.Equals(typeof bq,"string")?V.StringEnumerator(bq):bq.GetEnumerator();};V.ArrayEnumerator=function(bq){return new _.New(0,null,function(br){var bs;bs=br.s;return bs<n.length(bq)?(br.c=n.get(bq,bs),br.s=bs+1,true):false;},void 0);};V.StringEnumerator=function(bq){return new _.New(0,null,function(br){var bs;bs=br.s;return bs<bq.length?(br.c=bq.charCodeAt(bs),br.s=bs+1,true):false;},void 0);};V.Get0=function(bq){return bq instanceof a.Array?V.ArrayEnumerator(bq):z.Equals(typeof bq,"string")?V.StringEnumerator(bq):"GetEnumerator0"in bq?bq.GetEnumerator0():bq.GetEnumerator();};X.New=function(bq,br){return{PreviousNodes:bq,Top:br};};Y.get_Empty=function(){return{$:0,$0:new _2.New$3()};};Y.FindAll=function(bq){var br;function bs(bu){var bv,bw,bx;if(bu.$==0){bv=bu.$1;bs(bu.$0);bs(bv);}else if(bu.$==1)bt(bu.$0);else if(bu.$==2)bs(bu.$0.Current);else if(bu.$==6){bw=bu.$0;bx=bw.Holes;n.iter(bt,bx);}}function bt(bu){br.push(bu);bs(bu.Children);}br=[];bs(bq);return{$:0,$0:new _2.New$2(br)};};Y.Filter=function(bq,br){var bs;bs=br.$0;return{$:0,$0:be.Filter(bq,bs)};};Y.Intersect=function(bq,br){var bs,bt;bs=bq.$0;bt=br.$0;return{$:0,$0:be.Intersect(bs,bt)};};Y.ToArray=function(bq){return be.ToArray(bq.$0);};Y.Except=function(bq,br){var bs,bt;bs=bq.$0;bt=br.$0;return{$:0,$0:be.Except(bs,bt)};};Z.get_UseAnimations=function(){return _8.UseAnimations();};Z.Play=function(bq){return _7.Delay(function(){var br,bs;br=(bs=function(){},function(bt){return Z.Run(bs,bt);}(_8.Actions(bq)));return _7.Bind(br,function(){_8.Finalize(bq);return _7.Return(null);});});};Z.Append=function(bq,br){var bs,bt;bs=bq.$0;bt=br.$0;return{$:0,$0:_9.Append(bs,bt)};};Z.Concat=function(bq){return{$:0,$0:_9.Concat(F.map(_8.List,bq))};};Z.Run=function(bq,br){var bs,bt;bs=br.Duration;bt=function(bu){var bv;function bw(bx,by){var bz,bA;bz=by-bx;br.Compute(bz);bq();return bz<=bs?(bA=a.requestAnimationFrame(function(bB){bw(bx,bB);}),void 0):bu();}bv=a.requestAnimationFrame(function(bx){bw(bx,bx);});};return _7.FromContinuations(function(bu,bv,bw){return bt.apply(null,[bu,bv,bw]);});};Z.get_Empty=function(){return{$:0,$0:_9.Empty()};};_0.Schedule=function(bq){_7.Start(_7.Delay(function(){bq();return _7.Return(null);}),null);};_1=K.ArrayStorage=bp.Class({SSetAt:function(bq,br,bs){n.set(bs,bq,br);return bs;},SAppend:function(bq,br){var bs;bs=br.push(bq);return br;},SInit:function(){return this.init;}},null,_1);_1.New=bp.Ctor(function(bq){this.init=bq;},_1);_2=x.HashSet=bp.Class({Contains:function(bq){var br;br=this.data[this.hash(bq)];return br==null?false:this.arrContains(bq,br);},Add:function(bq){return this.add(bq);},arrContains:function(bq,br){var bs,bt,bu,bv;bs=true;bt=0;bv=br.length;while(bs?bt<bv:false)if(this.equals.apply(null,[br[bt],bq]))bs=false;else bt=bt+1;return!bs;},add:function(bq){var br,bs,bt;br=this.hash(bq);bs=this.data[br];return bs==null?(this.data[br]=[bq],this.count=this.count+1,true):this.arrContains(bq,bs)?false:(bt=bs.push(bq),this.count=this.count+1,true);},IntersectWith:function(bq){var br,bs,bt,bu,bv,bw;br=new _2.New$4(bq,this.equals,this.hash);bs=bl.concat(this.data);for(bt=0,bu=bs.length-1;bt<=bu;bt++){bv=bs[bt];!br.Contains(bv)?bw=this.Remove(bv):void 0;}},get_Count:function(){return this.count;},CopyTo:function(bq){var br,bs,bt,bu;br=0;bs=bl.concat(this.data);for(bt=0,bu=bs.length-1;bt<=bu;bt++)n.set(bq,bt,bs[bt]);},ExceptWith:function(bq){var br,bs;br=V.Get(bq);try{while(br.MoveNext()){bs=this.Remove(br.Current());}}finally{if("Dispose"in br)br.Dispose();}},Remove:function(bq){var br;br=this.data[this.hash(bq)];return br==null?false:this.arrRemove(bq,br)?(this.count=this.count-1,true):false;},arrRemove:function(bq,br){var bs,bt,bu,bv,bw;bs=true;bt=0;bv=br.length;while(bs?bt<bv:false)if(this.equals.apply(null,[br[bt],bq])){bw=br.splice.apply(br,[bt,1].concat([]));bs=false;}else bt=bt+1;return!bs;},GetEnumerator:function(){return V.Get(bl.concat(this.data));},GetEnumerator0:function(){return V.Get(bl.concat(this.data));}},null,_2);_2.New$3=bp.Ctor(function(){_2.New$4.call(this,[],z.Equals,z.Hash);},_2);_2.New$2=bp.Ctor(function(bq){_2.New$4.call(this,bq,z.Equals,z.Hash);},_2);_2.New$4=bp.Ctor(function(bq,br,bs){var bt,bu;this.equals=br;this.hash=bs;this.data=a.Array.prototype.constructor.apply(a.Array,[]);this.count=0;bt=V.Get(bq);try{while(bt.MoveNext()){bu=this.add(bt.Current());}}finally{if("Dispose"in bt)bt.Dispose();}},_2);_3.notPresent=function(){return i.FailWith("The given key was not present in the dictionary.");};_5.New=function(bq,br,bs,bt){var bu;bu={DynElem:bq,DynFlags:br,DynNodes:bs};bp.SetOptional(bu,"OnAfterRender",bt);return bu;};_6.isBlank=function(bq){return S.forall($.IsWhiteSpace,bq);};_7.Delay=function(bq){return function(br){try{(bq(null))(br);}catch(bs){br.k({$:1,$0:bs});}};};_7.Bind=function(bq,br){return _7.checkCancel(function(bs){bq({k:function(bt){var bu;if(bt.$==0){bu=bt.$0;_7.scheduler().Fork(function(){try{(br(bu))(bs);}catch(bv){bs.k({$:1,$0:bv});}});}else _7.scheduler().Fork(function(){bs.k(bt);});},ct:bs.ct});});};_7.Return=function(bq){return function(br){br.k({$:0,$0:bq});};};_7.Start=function(bq,br){var bs;bs=i.DefaultArg(br,(_7.defCTS())[0]);_7.scheduler().Fork(function(){if(!bs.c)bq({k:function(bt){if(bt.$==1)_7.UncaughtAsyncError(bt.$0);},ct:bs});});};_7.FromContinuations=function(bq){return function(br){var bs,bt;bs=[false];bt=function(bu){if(bs[0])i.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bs[0]=true;_7.scheduler().Fork(bu);}};bq(function(bu){bt(function(){br.k({$:0,$0:bu});});},function(bu){bt(function(){br.k({$:1,$0:bu});});},function(bu){bt(function(){br.k({$:2,$0:bu});});});};};_7.checkCancel=function(bq){return function(br){if(br.ct.c)_7.cancel(br);else bq(br);};};_7.defCTS=function(){bg.$cctor();return bg.defCTS;};_7.UncaughtAsyncError=function(bq){a.console.log.apply(a.console,["WebSharper: Uncaught asynchronous exception"].concat([bq]));};_7.cancel=function(bq){bq.k({$:2,$0:new bj.New(bq.ct)});};_7.scheduler=function(){bg.$cctor();return bg.scheduler;};_8.UseAnimations=function(){bd.$cctor();return bd.UseAnimations;};_8.Actions=function(bq){var br,bs;br=bq.$0;return _8.ConcatActions((bs=function(bt){return bt.$==1?{$:1,$0:bt.$0}:null;},function(bt){return n.choose(bs,bt);}(_9.ToArray(br))));};_8.Finalize=function(bq){var br,bs;br=bq.$0;bs=function(bt){if(bt.$==0)bt.$0();};(function(bt){n.iter(bs,bt);}(_9.ToArray(br)));};_8.List=function(bq){return bq.$0;};_8.ConcatActions=function(bq){var br,bs,bt,bu,bv;br=T.ofSeqNonCopying(bq);bs=n.length(br);return bs===0?_8.Const():bs===1?n.get(br,0):(bt=F.max((bu=function(bw){return bw.Duration;},function(bw){return F.map(bu,bw);}(br))),(bv=n.map(function(bw){return _8.Prolong(bt,bw);},br),_8.Def(bt,function(bw){n.iter(function(bx){bx.Compute(bw);},bv);})));};_8.Const=function(bq){return _8.Def(0,function(){return bq;});};_8.Prolong=function(bq,br){var bs,bt,bu;bs=br.Compute;bt=br.Duration;bu=bn.Create(function(){return br.Compute(br.Duration);});return{Compute:function(bv){return bv>=bt?bu.f():bs(bv);},Duration:bq};};_8.Def=function(bq,br){return{Compute:br,Duration:bq};};_9.Append=function(bq,br){return bq.$==0?br:br.$==0?bq:{$:2,$0:bq,$1:br};};_9.Concat=function(bq){var br,bs;br=T.ofSeqNonCopying(bq);bs=_9.Empty();return T.TreeReduce(bs,_9.Append,br);};_9.ToArray=function(bq){var br;function bs(bt){var bu,bv;if(bt.$==1)br.push(bt.$0);else if(bt.$==2){bu=bt.$1;bs(bt.$0);bs(bu);}else if(bt.$==3){bv=bt.$0;n.iter(function(bw){br.push(bw);},bv);}}br=[];bs(bq);return br.slice(0);};_9.Empty=function(){bm.$cctor();return bm.Empty;};_=V.T=bp.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},null,_);_.New=bp.Ctor(function(bq,br,bs,bt){this.s=bq;this.c=br;this.n=bs;this.d=bt;},_);$.IsWhiteSpace=function(bq){return a.String.fromCharCode(bq).match(new a.RegExp("\\s"))!==null;};ba.TryParse=function(bq,br,bs,bt){var bu,bv;bu=+bq;bv=(bu===bu-bu%1?bu>=br:false)?bu<=bs:false;bv?bt.set(bu):void 0;return bv;};bb=g.DynamicAttrNode=bp.Class({NChanged:function(){return this.updates;},NGetChangeAnim:function(bq){return Z.get_Empty();},NGetEnterAnim:function(bq){return Z.get_Empty();},NGetExitAnim:function(bq){return Z.get_Empty();},NSync:function(bq){if(this.dirty){(this.push(bq))(this.value);this.dirty=false;}}},null,bb);bb.New=bp.Ctor(function(bq,br){var bs,bt;bs=this;this.push=br;this.value=void 0;this.dirty=false;this.updates=(bt=function(bu){bs.value=bu;bs.dirty=true;},function(bu){return C.Map(bt,bu);}(bq));},bb);bc.$cctor=bp.Cctor(function(){bc.EmptyAttr=null;bc.$cctor=a.ignore;});bd.$cctor=bp.Cctor(function(){bd.CubicInOut=bh.Custom(function(bq){var br;br=bq*bq;return 3*br-2*(br*bq);});bd.UseAnimations=true;bd.$cctor=a.ignore;});be.Filter=function(bq,br){var bs;return new _2.New$2((bs=be.ToArray(br),n.filter(bq,bs)));};be.Intersect=function(bq,br){var bs;bs=new _2.New$2(be.ToArray(bq));bs.IntersectWith(be.ToArray(br));return bs;};be.ToArray=function(bq){var br;br=n.create(bq.get_Count(),void 0);bq.CopyTo(br);return br;};be.Except=function(bq,br){var bs;bs=new _2.New$2(be.ToArray(br));bs.ExceptWith(be.ToArray(bq));return bs;};k.head=function(bq){return bq.$==1?bq.$0:k.listEmpty();};k.tail=function(bq){return bq.$==1?bq.$1:k.listEmpty();};k.listEmpty=function(){return i.FailWith("The input list was empty.");};bf=_7.Scheduler=bp.Class({Fork:function(bq){var br,bs;br=this;this.robin.push(bq);this.idle?(this.idle=false,bs=a.setTimeout(function(){br.tick();},0)):void 0;},tick:function(){var bq,br,bs,bt,bu;br=this;bs=a.Date.now();bq=true;while(bq){bt=this.robin.length;bt===0?(this.idle=true,bq=false):((this.robin.shift())(),a.Date.now()-bs>40?(bu=a.setTimeout(function(){br.tick();},0),bq=false):void 0);}}},null,bf);bf.New=bp.Ctor(function(){this.idle=true;this.robin=[];},bf);bg.$cctor=bp.Cctor(function(){bg.noneCT={c:false,r:[]};bg.scheduler=new bf.New();bg.defCTS=[new bk.New()];bg.GetCT=function(bq){bq.k({$:0,$0:bq.ct});};bg.$cctor=a.ignore;});bh=g.Easing=bp.Class({},null,bh);bh.Custom=function(bq){return new bh.New(bq);};bh.New=bp.Ctor(function(bq){this.transformTime=bq;},bh);bi.DocChildren=function(bq){var br;function bs(bt){var bu,bv,bw;if(bt.$==2)bs(bt.$0.Current);else if(bt.$==1)br.push(bt.$0.El);else if(bt.$==3);else if(bt.$==5)br.push(bt.$0);else if(bt.$==4)br.push(bt.$0.Text);else if(bt.$==6){bu=bt.$0;bv=function(bx){if(bx.constructor===a.Object)bs(bx);else br.push(bx);};(function(bx){n.iter(bv,bx);}(bu.Els));}else{bw=bt.$1;bs(bt.$0);bs(bw);}}br=[];bs(bq.Children);return{$:0,$0:T.ofSeqNonCopying(br)};};bi.Children=function(bq,br){var bs,bt,bu,bv,bw,bx;if(br!=null?br.$==1:false){bu=br.$0[1];bv=br.$0[0];bw=a.Array.prototype.constructor.apply(a.Array,[]);bs=bv.nextSibling;while(bs!==bu){bx=bw.push(bs);bs=bs.nextSibling;}return{$:0,$0:bw};}else return{$:0,$0:n.init(bq.childNodes.length,(bt=bq.childNodes,function(by){return bt[by];}))};};bi.Except=function(bq,br){var bs,bt,bu;bs=bq.$0;bt=br.$0;return{$:0,$0:(bu=function(bv){var bw;bw=function(bx){return!(bv===bx);};return function(bx){return n.forall(bw,bx);}(bs);},function(bv){return n.filter(bu,bv);}(bt))};};bi.Iter=function(bq,br){var bs;bs=br.$0;n.iter(bq,bs);};bj=b.OperationCanceledException=bp.Class({},null,bj);bj.New=bp.Ctor(function(bq){bj.New$1.call(this,"The operation was canceled.",null,bq);},bj);bj.New$1=bp.Ctor(function(bq,br,bs){this.message=bq;this.inner=br;this.ct=bs;},bj);bk=b.CancellationTokenSource=bp.Class({},null,bk);bk.New=bp.Ctor(function(){this.c=false;this.pending=null;this.r=[];this.init=1;},bk);bl.concat=function(bq){var br,bs;br=[];for(var bt in bq)br.push.apply(br,bq[bt]);return br;};bm.$cctor=bp.Cctor(function(){bm.Empty={$:0};bm.$cctor=a.ignore;});bn.Create=function(bq){return{c:false,v:bq,f:bn.forceLazy};};bn.forceLazy=function(){var bq;bq=this.v();this.c=true;this.v=bq;this.f=bn.cachedLazy;return bq;};bn.cachedLazy=function(){return this.v;};e.Main();}());


if (typeof IntelliFactory !=='undefined')
  IntelliFactory.Runtime.Start();
