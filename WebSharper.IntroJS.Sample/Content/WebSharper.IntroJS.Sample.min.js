function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){window.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm;a=window;b=a.WebSharper=a.WebSharper||{};c=b.IntroJS=b.IntroJS||{};d=c.Sample=c.Sample||{};e=d.Client=d.Client||{};f=b.Operators=b.Operators||{};g=b.Obj=b.Obj||{};h=b.UI=b.UI||{};i=h.Doc=h.Doc||{};j=b.JavaScript=b.JavaScript||{};k=j.Pervasives=j.Pervasives||{};l=h.AttrProxy=h.AttrProxy||{};m=h.DomUtility=h.DomUtility||{};n=a.EventTarget;o=a.Node;p=b.Unchecked=b.Unchecked||{};q=h.View=h.View||{};r=h.Array=h.Array||{};s=h.Elt=h.Elt||{};t=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};u=j.JSModule=j.JSModule||{};v=h.Docs=h.Docs||{};w=h.Abbrev=h.Abbrev||{};x=w.Mailbox=w.Mailbox||{};y=h.DocElemNode=h.DocElemNode||{};z=a.CharacterData;A=b.Arrays=b.Arrays||{};B=b.List=b.List||{};C=B.T=B.T||{};D=a.Object;E=h.Attrs=h.Attrs||{};F=h.Updates=h.Updates||{};G=h.Snap=h.Snap||{};H=h.Client=h.Client||{};I=H.Docs=H.Docs||{};J=I.RunState=I.RunState||{};K=I.NodeSet=I.NodeSet||{};L=h.An=h.An||{};M=H.Attrs=H.Attrs||{};N=M.Dyn=M.Dyn||{};O=b.Enumerator=b.Enumerator||{};P=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};Q=w.Fresh=w.Fresh||{};R=a.StartupCode$WebSharper_UI$Doc_Client=a.StartupCode$WebSharper_UI$Doc_Client||{};S=b.Collections=b.Collections||{};T=S.Dictionary=S.Dictionary||{};U=S.HashSet=S.HashSet||{};V=b.Concurrency=b.Concurrency||{};W=h.Anims=h.Anims||{};X=h.AppendList=h.AppendList||{};Y=O.T=O.T||{};Z=b.Seq=b.Seq||{};_0=S.DictionaryUtil=S.DictionaryUtil||{};_1=V.AsyncBody=V.AsyncBody||{};_2=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};_3=V.CT=V.CT||{};_4=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};_5=w.HashSet=w.HashSet||{};_6=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};_7=b.Slice=b.Slice||{};_8=b.Strings=b.Strings||{};_9=V.Scheduler=V.Scheduler||{};_=b.CancellationTokenSource=b.CancellationTokenSource||{};$=h.Easing=h.Easing||{};ba=b.OperationCanceledException=b.OperationCanceledException||{};bb=S.HashSetUtil=S.HashSetUtil||{};bc=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bd=b.Lazy=b.Lazy||{};be=I.DomNodes=I.DomNodes||{};bf=b.Queue=b.Queue||{};bg=b.LazyExtensionsProxy=b.LazyExtensionsProxy||{};bh=bg.LazyRecord=bg.LazyRecord||{};bi=a.IntelliFactory;bj=bi&&bi.Runtime;bk=a.console;bl=a.jQuery;bm=a.Date;e.Main=function(){var bn,bo,bp,bq,br,bs,bt,bu,bv;bn=new a.introJs();bo=i.Element("h1",[],[i.TextNode("I am the title.")]);bp=i.Element("div",[],[i.Element("p",[],[i.TextNode("I am a paragraph inside")]),i.Element("p",[],[i.TextNode("I am another paragraph")])]);bq=i.Button("Intro",[],function(){bn.start();});br=i.Element("div",[],[bo,bp,bq]);bn.addSteps([(bs={},bs.element=bo.elt,bs.intro="This is the title",bs),(bt={},bt.element=bq.elt,bt.intro="This is the button you pressed",bt),(bu={},bu.element=bp.elt,bu.intro="This is the content on the page",bu),(bv={},bv.element=br.elt,bv.intro="This is the whole page",bv)]);i.RunById("main",br);};f.FailWith=function(bn){throw a.Error(bn);};f.KeyValue=function(bn){return[bn.K,bn.V];};g=b.Obj=bj.Class({Equals:function(bn){return this===bn;},GetHashCode:function(){return -1;}},null,g);i=h.Doc=bj.Class({},g,i);i.Element=function(bn,bo,bp){var bq,br;bq=l.Concat(bo);br=i.Concat(bp);return s.New(m.CreateElement(bn),bq,br);};i.Button=function(bn,bo,bp){var bq;bq=l.Concat(bo);return s.New(i.Clickable("button",bp),bq,i.TextNode(bn));};i.RunById=function(bn,bo){var bp;bp=m.Doc().getElementById(bn);p.Equals(bp,null)?f.FailWith("invalid id: "+bn):i.Run(bp,bo);};i.Concat=function(bn){var bo;bo=r.ofSeqNonCopying(bn);return r.TreeReduce(i.Empty(),i.Append,bo);};i.TextNode=function(bn){return i.Mk({$:5,$0:m.CreateText(bn)},q.Const());};i.Clickable=function(bn,bo){var bp;bp=m.CreateElement(bn);bp.addEventListener("click",function(bq){bq.preventDefault();return bo();},false);return bp;};i.Run=function(bn,bo){var bp;i.LoadLocalTemplates$1();bp=bo.docNode;v.LinkElement(bn,bp);q.Sink(x.StartProcessor(v.PerformAnimatedUpdate(v.CreateRunState(bn,bp),bp)),bo.updates);};i.Empty=function(){return i.Mk(null,q.Const());};i.Append=function(bn,bo){return i.Mk({$:0,$0:bn.docNode,$1:bo.docNode},q.Map2Unit(bn.updates,bo.updates));};i.Mk=function(bn,bo){return new i.New(bn,bo);};i.LoadLocalTemplates$1=function(){if(!v.LocalTemplatesLoaded()){v.set_LocalTemplatesLoaded(true);i.LoadLocalTemplates("");}};i.LoadLocalTemplates=function(bn){var bo;bo=v.LoadedTemplateFile("");bo.count>0?v.LoadedTemplates().set_Item(bn,bo):(function(){var bp,bq,br,bs;while(true){bp=a.document.querySelector("[ws-template]");if(p.Equals(bp,null)){bq=a.document.querySelector("[ws-children-template]");if(p.Equals(bq,null))return null;else{br=bq.getAttribute("ws-children-template");bq.removeAttribute("ws-children-template");i.PrepareTemplate(bn,{$:1,$0:br},function(bt){return function(){return m.ChildrenArray(bt);};}(bq));}}else{bs=bp.getAttribute("ws-template");i.PrepareSingleTemplate(bn,{$:1,$0:bs},bp);}}}(),v.LoadedTemplates().set_Item("",v.LoadedTemplateFile(bn)));};i.PrepareTemplate=function(bn,bo,bp){var bq,br,bs,bt,bu;if(!v.LoadedTemplateFile(bn).ContainsKey(bo==null?"":bo.$0)){bq=bp();for(br=0,bs=bq.length-1;br<=bs;br++){bt=A.get(bq,br);bu=bt.parentNode;p.Equals(bu,null)?void 0:bu.removeChild(bt);}i.PrepareTemplateStrict(bn,bo,bq);}};i.PrepareSingleTemplate=function(bn,bo,bp){var bq,br,bs;bp.removeAttribute("ws-template");bq=bp.getAttribute("ws-replace");bq===null?void 0:(bp.removeAttribute("ws-replace"),br=bp.parentNode,p.Equals(br,null)?void 0:(bs=a.document.createElement(bp.tagName),bs.setAttribute("ws-replace",bq),br.replaceChild(bs,bp)));i.PrepareTemplateStrict(bn,bo,[bp]);};i.PrepareTemplateStrict=function(bn,bo,bp){var bq,br;function bs(bE){var bG,bH,bI,bJ,bK,bL,bM,bN;function bF(bO){var bP;bP=bE.getAttribute(bO);bP===null?void 0:bE.setAttribute(bO,bP.toLowerCase());}bG=bE.attributes;bH=[];bI=[];bJ=[];for(bK=0,bL=bG.length-1;bK<=bL;bK++){bM=bG.item(bK);_8.StartsWith(bM.nodeName,"ws-on")&&bM.nodeName!=="ws-onafterrender"&&bM.nodeName!=="ws-on"?(bH.push(bM.nodeName),bI.push(_7.string(bM.nodeName,{$:1,$0:"ws-on".length},null)+":"+bM.nodeValue.toLowerCase())):!_8.StartsWith(bM.nodeName,"ws-")&&(new a.RegExp(v.TextHoleRE())).test(bM.nodeValue)?(bM.nodeValue=(bN=new a.RegExp(v.TextHoleRE(),"g"),bM.nodeValue.replace(bN,function(bO,bP){return"${"+bP.toLowerCase()+"}";})),bJ.push(bM.nodeName)):void 0;}!(bI.length==0)?bE.setAttribute("ws-on",_8.concat(" ",bI)):void 0;!(bJ.length==0)?bE.setAttribute("ws-attr-holes",_8.concat(" ",bJ)):void 0;bF("ws-hole");bF("ws-replace");bF("ws-attr");bF("ws-onafterrender");bF("ws-var");A.iter(function(bO){bE.removeAttribute(bO);},bH);}function bt(bE){var bF,bG,bH,bI,bJ,bK;bF=null;bG=0;bI=bE.textContent;bJ=new a.RegExp(v.TextHoleRE(),"g");while(bF=bJ.exec(bI),bF!==null){bE.parentNode.insertBefore(a.document.createTextNode(_7.string(bI,{$:1,$0:bG},{$:1,$0:bJ.lastIndex-A.get(bF,0).length-1})),bE);bG=bJ.lastIndex;bK=a.document.createElement("span");bK.setAttribute("ws-replace",A.get(bF,1).toLowerCase());bE.parentNode.insertBefore(bK,bE);}bJ.lastIndex=0;bE.textContent=_7.string(bI,{$:1,$0:bG},null);}function bu(bE,bF){function bG(bH){m.IterSelector(bE,"["+bH+"]",function(bI){var bJ,bK;bJ=(bK=null,[bF.TryGetValue(bI.getAttribute(bH).toLowerCase(),{get:function(){return bK;},set:function(bL){bK=bL;}}),bK]);bJ[0]?bI.setAttribute(bH,bJ[1]):void 0;});}bG("ws-hole");bG("ws-replace");bG("ws-attr");bG("ws-onafterrender");bG("ws-var");m.IterSelector(bE,"[ws-on]",function(bH){bH.setAttribute("ws-on",_8.concat(" ",A.map(function(bI){var bJ,bK,bL;bJ=_8.SplitChars(bI,[":"],1);bK=(bL=null,[bF.TryGetValue(A.get(bJ,1),{get:function(){return bL;},set:function(bM){bL=bM;}}),bL]);return bK[0]?A.get(bJ,0)+":"+bK[1]:bI;},_8.SplitChars(bH.getAttribute("ws-on"),[" "],1))));});return m.IterSelector(bE,"[ws-attr-holes]",function(bH){var bI,bJ,bK;bI=_8.SplitChars(bH.getAttribute("ws-attr-holes"),[" "],1);for(bJ=0,bK=bI.length-1;bJ<=bK;bJ++)(function(){var bL;function bM(bN,bO){var bP;bP=f.KeyValue(bO);return bN.replace(new a.RegExp("\\${"+bP[0]+"}","ig"),"${"+bP[1]+"}");}bL=A.get(bI,bJ);return bH.setAttribute(bL,(((bj.Curried3(Z.fold))(bM))(bH.getAttribute(bL)))(bF));}());});}function bv(bE,bF){var bG,bH,bI,bJ,bK;bs(bF);bG=bF.nodeName.toLowerCase();bH=bE.querySelector("[ws-attr="+bG+"]");if(p.Equals(bH,null))return bk.warn("Filling non-existent attr hole",bG);else{bH.removeAttribute("ws-attr");for(bI=0,bJ=bF.attributes.length-1;bI<=bJ;bI++){bK=bF.attributes.item(bI);bK.name==="class"&&bH.hasAttribute("class")?bH.setAttribute("class",bH.getAttribute("class")+" "+bK.nodeValue):bH.setAttribute(bK.name,bK.nodeValue);}return;}}function bw(bE,bF){function bG(bH){m.IterSelector(bE,"["+bH+"]",function(bI){if(!bF.Contains(bI.getAttribute(bH)))bI.removeAttribute(bH);});}bG("ws-attr");bG("ws-onafterrender");bG("ws-var");m.IterSelector(bE,"[ws-hole]",function(bH){if(!bF.Contains(bH.getAttribute("ws-hole"))){bH.removeAttribute("ws-hole");while(bH.hasChildNodes())bH.removeChild(bH.lastChild);}});m.IterSelector(bE,"[ws-replace]",function(bH){if(!bF.Contains(bH.getAttribute("ws-replace")))bH.parentNode.removeChild(bH);});m.IterSelector(bE,"[ws-on]",function(bH){bH.setAttribute("ws-on",_8.concat(" ",A.filter(function(bI){return bF.Contains(A.get(_8.SplitChars(bI,[":"],1),1));},_8.SplitChars(bH.getAttribute("ws-on"),[" "],1))));});return m.IterSelector(bE,"[ws-attr-holes]",function(bH){var bI,bJ,bK,bL,bM;bI=_8.SplitChars(bH.getAttribute("ws-attr-holes"),[" "],1);for(bJ=0,bK=bI.length-1;bJ<=bK;bJ++){bL=A.get(bI,bJ);bH.setAttribute(bL,(bM=new a.RegExp(v.TextHoleRE(),"g"),bH.getAttribute(bL).replace(bM,function(bN,bO){return bF.Contains(bO)?bN:"";})));}});}function bx(bE,bF){var bG;bG=bE.querySelector("[ws-replace]");return p.Equals(bG,null)?(bk.warn("Filling non-existent text hole",bo),null):(bG.parentNode.replaceChild(new a.Text(bF),bG),{$:1,$0:bG.getAttribute("ws-replace")});}function by(bE,bF,bG){while(true)if(bE.hasChildNodes())bG=bF.insertBefore(bE.lastChild,bG);else return null;}function bz(bE,bF,bG){var bH,bI,bJ,bK,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7;function bL(b8){}while(true)switch(bE){case 0:bM=_7.string(bF.nodeName,{$:1,$0:3},null).toLowerCase();bN=(bH=bM.indexOf("."),bH===-1?[bn,bM]:[_7.string(bM,null,{$:1,$0:bH-1}),_7.string(bM,{$:1,$0:bH+1},null)]);bO=bN[1];bP=bN[0];if(!v.LoadedTemplates().ContainsKey(bP))return bk.warn("Instantiating non-loaded template",bO);else{bQ=v.LoadedTemplates().get_Item(bP);if(!bQ.ContainsKey(bO))return bk.warn("Instantiating non-loaded template",bO);else{bR=bQ.get_Item(bO);bS=bR.cloneNode(true);bT=new U.New$3();bU=new T.New$5();bV=bF.attributes;for(bW=0,bX=bV.length-1;bW<=bX;bW++){bY=bV.item(bW).name.toLowerCase();bU.set_Item(bY,(bZ=bV.item(bW).nodeValue,bZ===""?bY:bZ.toLowerCase()));!bT.Add(bY)?bk.warn("Hole mapped twice",bY):void 0;}for(b0=0,b1=bF.childNodes.length-1;b0<=b1;b0++){b2=bF.childNodes[b0];p.Equals(b2.nodeType,o.ELEMENT_NODE)?!bT.Add(b2.nodeName.toLowerCase())?bk.warn("Hole filled twice",bO):void 0:void 0;}b3=bF.childNodes.length===1&&p.Equals(bF.firstChild.nodeType,o.TEXT_NODE);if(b3){bJ=bx(bS,bF.firstChild.textContent);((function(b8){return function(b9){if(b9!=null)b8(b9.$0);};}((bK=function(b8){return function(b9){return b8.Add(b9);};}(bT),function(b8){return bL(bK(b8));})))(bJ));}bw(bS,bT);if(!b3){for(b4=0,b5=bF.childNodes.length-1;b4<=b5;b4++){b6=bF.childNodes[b4];p.Equals(b6.nodeType,o.ELEMENT_NODE)?b6.hasAttributes()?bv(bS,b6):bA(bS,b6):void 0;}}bu(bS,bU);(((function(b8){function b9(b_,b$){return by(b8,b_,b$);}return function(b_){return function(b$){return b9(b_,b$);};};}(bS))(bF.parentNode))(bF));bF.parentNode.removeChild(bF);return;}}break;case 1:if(bG!==null){b7=bG.nextSibling;if(p.Equals(bG.nodeType,o.TEXT_NODE))bt(bG);else if(p.Equals(bG.nodeType,o.ELEMENT_NODE))bC(bG);bG=b7;}else return null;break;}}function bA(bE,bF){var bG,bI,bJ;function bH(bK,bL){var bM,bN,bO;if(bI==="title"&&bF.hasChildNodes()){bM=bl.parseHTML(bF.textContent);bF.removeChild(bF.firstChild);for(bN=0,bO=bM.length-1;bN<=bO;bN++)bF.appendChild(A.get(bM,bN));}else null;bC(bF);return by(bF,bK,bL);}bI=bF.nodeName.toLowerCase();m.IterSelector(bE,"[ws-attr-holes]",function(bK){var bL,bM,bN,bO,bP;bL=_8.SplitChars(bK.getAttribute("ws-attr-holes"),[" "],1);for(bM=0,bN=bL.length-1;bM<=bN;bM++){bO=A.get(bL,bM);bK.setAttribute(bO,(bP=new a.RegExp("\\${"+bI+"}","ig"),bK.getAttribute(bO).replace(bP,bF.textContent)));}});bJ=bE.querySelector("[ws-hole="+bI+"]");if(p.Equals(bJ,null)){bG=bE.querySelector("[ws-replace="+bI+"]");return p.Equals(bG,null)?null:(bH(bG.parentNode,bG),void bG.parentNode.removeChild(bG));}else{while(bJ.hasChildNodes())bJ.removeChild(bJ.lastChild);bJ.removeAttribute("ws-hole");return bH(bJ,null);}}function bB(bE){return bz(0,bE);}function bC(bE){var bF,bG;if(_8.StartsWith(bE.nodeName.toLowerCase(),"ws-")&&!bE.hasAttribute("ws-template"))bB(bE);else{bs(bE);bF=bE.getAttribute("ws-template");if(bF===null){bG=bE.getAttribute("ws-children-template");if(bG===null)bD(bE,bE.firstChild);else{bE.removeAttribute("ws-children-template");i.PrepareTemplate(bn,{$:1,$0:bG},function(){return m.ChildrenArray(bE);});while(bE.hasChildNodes())bE.removeChild(bE.lastChild);}}else i.PrepareSingleTemplate(bn,{$:1,$0:bF},bE);}}function bD(bE,bF){return bz(1,bE,bF);}bq=i.FakeRoot(bp);br=(bo==null?"":bo.$0).toLowerCase();v.LoadedTemplateFile(bn).set_Item(br,bq);A.length(bp)>0?bD(bq,A.get(bp,0)):void 0;};i.FakeRoot=function(bn){var bo,bp,bq;bo=a.document.createElement("div");for(bp=0,bq=bn.length-1;bp<=bq;bp++)bo.appendChild(A.get(bn,bp));return bo;};i.New=bj.Ctor(function(bn,bo){this.docNode=bn;this.updates=bo;},i);k.NewFromSeq=function(bn){var bo,bp,bq;bo={};bp=O.Get(bn);try{while(bp.MoveNext()){bq=bp.Current();bo[bq[0]]=bq[1];}}finally{if("Dispose"in bp)bp.Dispose();}return bo;};l=h.AttrProxy=bj.Class({},null,l);l.Concat=function(bn){var bo;bo=r.ofSeqNonCopying(bn);return r.TreeReduce(E.EmptyAttr(),l.Append,bo);};l.Append=function(bn,bo){return E.AppendTree(bn,bo);};m.CreateElement=function(bn){return m.Doc().createElement(bn);};m.Doc=function(){t.$cctor();return t.Doc;};m.CreateText=function(bn){return m.Doc().createTextNode(bn);};m.ChildrenArray=function(bn){var bo,bp,bq;bo=[];for(bp=0,bq=bn.childNodes.length-1;bp<=bq;bp++)bo.push(bn.childNodes[bp]);return bo;};m.InsertAt=function(bn,bo,bp){var bq;if(!(bp.parentNode===bn&&bo===(bq=bp.nextSibling,p.Equals(bq,null)?null:bq)))bn.insertBefore(bp,bo);};m.IterSelector=function(bn,bo,bp){var bq,br,bs;bq=bn.querySelectorAll(bo);for(br=0,bs=bq.length-1;br<=bs;br++)bp(bq[br]);};m.RemoveNode=function(bn,bo){if(bo.parentNode===bn)bn.removeChild(bo);};p.Equals=function(bn,bo){var bp,bq,br,bs;if(bn===bo)return true;else{bp=typeof bn;if(bp=="object"){if(bn===null||bn===void 0||bo===null||bo===void 0)return false;else if("Equals"in bn)return bn.Equals(bo);else if(bn instanceof a.Array&&bo instanceof a.Array)return p.arrayEquals(bn,bo);else if(bn instanceof a.Date&&bo instanceof a.Date)return p.dateEquals(bn,bo);else{bq=[true];for(var bt in bn)if(function(bu){bq[0]=!bn.hasOwnProperty(bu)||bo.hasOwnProperty(bu)&&p.Equals(bn[bu],bo[bu]);return!bq[0];}(bt))break;if(bq[0]){for(var bu in bo)if(function(bv){bq[0]=!bo.hasOwnProperty(bv)||bn.hasOwnProperty(bv);return!bq[0];}(bu))break;}return bq[0];}}else return bp=="function"&&("$Func"in bn?bn.$Func===bo.$Func&&bn.$Target===bo.$Target:"$Invokes"in bn&&"$Invokes"in bo&&p.arrayEquals(bn.$Invokes,bo.$Invokes));}};p.arrayEquals=function(bn,bo){var bp,bq;if(A.length(bn)===A.length(bo)){bp=true;bq=0;while(bp&&bq<A.length(bn)){!p.Equals(A.get(bn,bq),A.get(bo,bq))?bp=false:void 0;bq=bq+1;}return bp;}else return false;};p.dateEquals=function(bn,bo){return bn.getTime()===bo.getTime();};p.Hash=function(bn){var bo;bo=typeof bn;return bo=="function"?0:bo=="boolean"?bn?1:0:bo=="number"?bn:bo=="string"?p.hashString(bn):bo=="object"?bn==null?0:bn instanceof a.Array?p.hashArray(bn):p.hashObject(bn):0;};p.hashString=function(bn){var bo,bp,bq;if(bn===null)return 0;else{bo=5381;for(bp=0,bq=bn.length-1;bp<=bq;bp++)bo=p.hashMix(bo,bn[bp].charCodeAt());return bo;}};p.hashArray=function(bn){var bo,bp,bq;bo=-34948909;for(bp=0,bq=A.length(bn)-1;bp<=bq;bp++)bo=p.hashMix(bo,p.Hash(A.get(bn,bp)));return bo;};p.hashObject=function(bn){var bo,bp;if("GetHashCode"in bn)return bn.GetHashCode();else{bo=[0];for(var bq in bn)if(function(br){bo[0]=p.hashMix(p.hashMix(bo[0],p.hashString(br)),p.Hash(bn[br]));return false;}(bq))break;return bo[0];}};p.Compare=function(bn,bo){var bp,bq,br,bs,bt,bu;if(bn===bo)return 0;else{bq=typeof bn;switch(bq=="function"?1:bq=="boolean"?2:bq=="number"?2:bq=="string"?2:bq=="object"?3:0){case 0:return typeof bo=="undefined"?0:-1;break;case 1:return f.FailWith("Cannot compare function values.");break;case 2:return bn<bo?-1:1;break;case 3:if(bn===null)br=-1;else if(bo===null)br=1;else if("CompareTo"in bn)br=bn.CompareTo(bo);else if("CompareTo0"in bn)br=bn.CompareTo0(bo);else if(bn instanceof a.Array&&bo instanceof a.Array)br=p.compareArrays(bn,bo);else if(bn instanceof a.Date&&bo instanceof a.Date)br=p.compareDates(bn,bo);else{bs=[0];for(var bv in bn)if(function(bw){return!bn.hasOwnProperty(bw)?false:!bo.hasOwnProperty(bw)?(bs[0]=1,true):(bs[0]=p.Compare(bn[bw],bo[bw]),bs[0]!==0);}(bv))break;if(bs[0]===0){for(var bw in bo)if(function(bx){return!bo.hasOwnProperty(bx)?false:!bn.hasOwnProperty(bx)&&(bs[0]=-1,true);}(bw))break;}br=bs[0];}return br;break;}}};p.hashMix=function(bn,bo){return(bn<<5)+bn+bo;};p.compareArrays=function(bn,bo){var bp,bq;if(A.length(bn)<A.length(bo))return -1;else if(A.length(bn)>A.length(bo))return 1;else{bp=0;bq=0;while(bp===0&&bq<A.length(bn)){bp=p.Compare(A.get(bn,bq),A.get(bo,bq));bq=bq+1;}return bp;}};p.compareDates=function(bn,bo){return p.Compare(bn.getTime(),bo.getTime());};q=h.View=bj.Class({},null,q);r.ofSeqNonCopying=function(bn){var bo,bp;if(bn instanceof a.Array)return bn;else if(bn instanceof C)return A.ofList(bn);else if(bn===null)return[];else{bo=[];bp=O.Get(bn);try{while(bp.MoveNext())bo.push(bp.Current());return bo;}finally{if("Dispose"in bp)bp.Dispose();}}};r.TreeReduce=function(bn,bo,bp){var bq;function br(bs,bt){var bu,bv;return bt<=0?bn:bt===1&&(bs>=0&&bs<bq)?A.get(bp,bs):(bv=bt/2>>0,bo(br(bs,bv),br(bs+bv,bt-bv)));}bq=A.length(bp);return br(0,bq);};r.MapTreeReduce=function(bn,bo,bp,bq){var br;function bs(bt,bu){var bv,bw;return bu<=0?bo:bu===1&&(bt>=0&&bt<br)?bn(A.get(bq,bt)):(bw=bu/2>>0,bp(bs(bt,bw),bs(bt+bw,bu-bw)));}br=A.length(bq);return bs(0,br);};s=h.Elt=bj.Class({},i,s);s.New=function(bn,bo,bp){var bq,br;bq=v.CreateElemNode(bn,bo,bp.docNode);br=F.Create(bp.updates);return new s.New$1({$:1,$0:bq},q.Map2Unit(E.Updates(bq.Attr),br.v),bn,br);};s.New$1=bj.Ctor(function(bn,bo,bp,bq){i.New.call(this,bn,bo);this.docNode$1=bn;this.updates$1=bo;this.elt=bp;this.rvUpdates=bq;},s);q.Const=function(bn){var bo;bo=G.New({$:0,$0:bn});return function(){return bo;};};q.Sink=function(bn,bo){function bp(){G.WhenRun(bo(),bn,function(){V.scheduler().Fork(bp);});}V.scheduler().Fork(bp);};q.Map2Unit=function(bn,bo){return q.CreateLazy(function(){return G.Map2Unit(bn(),bo());});};q.CreateLazy=function(bn){var bo;bo={c:null,o:bn};return function(){var bp,bq;bp=bo.c;return bp===null?(bp=bo.o(),bo.c=bp,(bq=bp.s,bq!=null&&bq.$==0)?bo.o=null:G.WhenObsoleteRun(bp,function(){bo.c=null;}),bp):bp;};};t.$cctor=function(){t.$cctor=a.ignore;t.Doc=a.document;};u.GetFieldValues=function(bn){var bo,bp;bo=[];for(var bq in bn)bo.push(bn[bq]);return bo;};v.LinkElement=function(bn,bo){v.InsertDoc(bn,bo,null);};v.CreateRunState=function(bn,bo){return J.New(K.get_Empty(),v.CreateElemNode(bn,E.EmptyAttr(),bo));};v.PerformAnimatedUpdate=function(bn,bo){var bp;return L.get_UseAnimations()?(bp=null,V.Delay(function(){var bq,br,bs;bq=K.FindAll(bo);br=v.ComputeChangeAnim(bn,bq);bs=v.ComputeEnterAnim(bn,bq);return V.Bind(L.Play(L.Append(br,v.ComputeExitAnim(bn,bq))),function(){return V.Bind(v.SyncElemNodesNextFrame(bn),function(){return V.Bind(L.Play(bs),function(){bn.PreviousNodes=bq;return V.Return(null);});});});})):v.SyncElemNodesNextFrame(bn);};v.CreateElemNode=function(bn,bo,bp){var bq;v.LinkElement(bn,bp);bq=E.Insert(bn,bo);return y.New(bq,bp,null,bn,Q.Int(),bj.GetOptional(bq.OnAfterRender));};v.LocalTemplatesLoaded=function(){R.$cctor();return R.LocalTemplatesLoaded;};v.set_LocalTemplatesLoaded=function(bn){R.$cctor();R.LocalTemplatesLoaded=bn;};v.InsertDoc=function(bn,bo,bp){var bq;return bo!=null&&bo.$==1?v.InsertNode(bn,bo.$0.El,bp):bo!=null&&bo.$==2?(bq=bo.$0,(bq.Dirty=false,v.InsertDoc(bn,bq.Current,bp))):bo==null?bp:bo!=null&&bo.$==4?v.InsertNode(bn,bo.$0.Text,bp):bo!=null&&bo.$==5?v.InsertNode(bn,bo.$0,bp):bo!=null&&bo.$==6?A.foldBack(function(br,bs){return br.constructor===D?v.InsertDoc(bn,br,bs):v.InsertNode(bn,br,bs);},bo.$0.Els,bp):v.InsertDoc(bn,bo.$0,v.InsertDoc(bn,bo.$1,bp));};v.ComputeChangeAnim=function(bn,bo){var bp;function bq(br){return E.HasChangeAnim(br.Attr);}bp=function(br){return K.Filter(bq,br);};return L.Concat(A.map(function(br){return E.GetChangeAnim(br.Attr);},K.ToArray(K.Intersect(bp(bn.PreviousNodes),bp(bo)))));};v.ComputeEnterAnim=function(bn,bo){return L.Concat(A.map(function(bp){return E.GetEnterAnim(bp.Attr);},K.ToArray(K.Except(bn.PreviousNodes,K.Filter(function(bp){return E.HasEnterAnim(bp.Attr);},bo)))));};v.ComputeExitAnim=function(bn,bo){return L.Concat(A.map(function(bp){return E.GetExitAnim(bp.Attr);},K.ToArray(K.Except(bo,K.Filter(function(bp){return E.HasExitAnim(bp.Attr);},bn.PreviousNodes)))));};v.SyncElemNodesNextFrame=function(bn){function bo(bp){a.requestAnimationFrame(function(){v.SyncElemNode(bn.Top);bp();});}return V.FromContinuations(function(bp,bq,br){return bo.apply(null,[bp,bq,br]);});};v.LoadedTemplateFile=function(bn){var bo,bp,bq;bo=(bp=null,[v.LoadedTemplates().TryGetValue(bn,{get:function(){return bp;},set:function(br){bp=br;}}),bp]);return bo[0]?bo[1]:(bq=new T.New$5(),(v.LoadedTemplates().set_Item(bn,bq),bq));};v.LoadedTemplates=function(){R.$cctor();return R.LoadedTemplates;};v.InsertNode=function(bn,bo,bp){m.InsertAt(bn,bp,bo);return bo;};v.SyncElemNode=function(bn){v.SyncElement(bn);v.Sync(bn.Children);v.AfterRender(bn);};v.SyncElement=function(bn){function bo(bp){function bq(br){var bs,bt;return br!=null&&br.$==0?bq(br.$0)||bq(br.$1):br!=null&&br.$==2?(bs=br.$0,bs.Dirty||bq(bs.Current)):br!=null&&br.$==6&&(bt=br.$0,bt.Dirty||A.exists(bo,bt.Holes));}return bq(bp.Children);}E.Sync(bn.El,bn.Attr);bo(bn)?v.DoSyncElement(bn):void 0;};v.Sync=function(bn){var bo,bp;if(bn!=null&&bn.$==1)v.SyncElemNode(bn.$0);else if(bn!=null&&bn.$==2)v.Sync(bn.$0.Current);else if(bn==null);else if(bn!=null&&bn.$==5);else if(bn!=null&&bn.$==4){bo=bn.$0;bo.Dirty?(bo.Text.nodeValue=bo.Value,bo.Dirty=false):void 0;}else if(bn!=null&&bn.$==6){bp=bn.$0;A.iter(function(bq){v.SyncElemNode(bq);},bp.Holes);A.iter(function(bq){E.Sync(bq[0],bq[1]);},bp.Attrs);v.AfterRender(bp);}else{v.Sync(bn.$0);v.Sync(bn.$1);}};v.AfterRender=function(bn){var bo;bo=bj.GetOptional(bn.Render);bo!=null&&bo.$==1?(bo.$0(bn.El),bj.SetOptional(bn,"Render",null)):void 0;};v.TextHoleRE=function(){R.$cctor();return R.TextHoleRE;};v.DoSyncElement=function(bn){var bo,bp,bq;function br(bs,bt){var bu,bv;return bs!=null&&bs.$==1?bs.$0.El:bs!=null&&bs.$==2?(bu=bs.$0,bu.Dirty?(bu.Dirty=false,v.InsertDoc(bo,bu.Current,bt)):br(bu.Current,bt)):bs==null?bt:bs!=null&&bs.$==4?bs.$0.Text:bs!=null&&bs.$==5?bs.$0:bs!=null&&bs.$==6?(bv=bs.$0,(bv.Dirty?bv.Dirty=false:void 0,A.foldBack(function(bw,bx){return bw.constructor===D?br(bw,bx):bw;},bv.Els,bt))):br(bs.$0,br(bs.$1,bt));}bo=bn.El;be.Iter((bp=bn.El,function(bs){m.RemoveNode(bp,bs);}),be.Except(be.DocChildren(bn),be.Children(bn.El,bj.GetOptional(bn.Delimiters))));br(bn.Children,(bq=bj.GetOptional(bn.Delimiters),bq!=null&&bq.$==1?bq.$0[1]:null));};x.StartProcessor=function(bn){var bo;function bp(){var bq;bq=null;return V.Delay(function(){return V.Bind(bn,function(){var br;br=bo[0];return br===1?(bo[0]=0,V.Zero()):br===2?(bo[0]=1,bp()):V.Zero();});});}bo=[0];return function(){var bq;bq=bo[0];bq===0?(bo[0]=1,V.Start(bp(),null)):bq===1?bo[0]=2:void 0;};};y=h.DocElemNode=bj.Class({Equals:function(bn){return this.ElKey===bn.ElKey;},GetHashCode:function(){return this.ElKey;}},null,y);y.New=function(bn,bo,bp,bq,br,bs){var bt;return new y((bt={Attr:bn,Children:bo,El:bq,ElKey:br},(bj.SetOptional(bt,"Delimiters",bp),bj.SetOptional(bt,"Render",bs),bt)));};A.get=function(bn,bo){A.checkBounds(bn,bo);return bn[bo];};A.length=function(bn){return bn.dims===2?bn.length*bn.length:bn.length;};A.checkBounds=function(bn,bo){if(bo<0||bo>=bn.length)f.FailWith("Index was outside the bounds of the array.");};A.set=function(bn,bo,bp){A.checkBounds(bn,bo);bn[bo]=bp;};C=B.T=bj.Class({GetEnumerator:function(){return new Y.New(this,null,function(bn){var bo;bo=bn.s;return bo.$==0?false:(bn.c=bo.$0,bn.s=bo.$1,true);},void 0);},GetEnumerator0:function(){return O.Get(this);}},null,C);A.ofList=function(bn){var bo,bp;bp=[];bo=bn;while(!(bo.$==0)){bp.push(B.head(bo));bo=B.tail(bo);}return bp;};A.foldBack=function(bn,bo,bp){var bq,br,bs,bt,bu;bq=bp;bs=bo.length;for(bt=1,bu=bs;bt<=bu;bt++)bq=bn(bo[bs-bt],bq);return bq;};A.iter=function(bn,bo){var bp,bq;for(bp=0,bq=bo.length-1;bp<=bq;bp++)bn(bo[bp]);};A.map=function(bn,bo){var bp,bq,br;bp=new a.Array(bo.length);for(bq=0,br=bo.length-1;bq<=br;bq++)bp[bq]=bn(bo[bq]);return bp;};A.choose=function(bn,bo){var bp,bq,br,bs;bp=[];for(bq=0,br=bo.length-1;bq<=br;bq++){bs=bn(bo[bq]);bs==null?void 0:bp.push(bs.$0);}return bp;};A.tryPick=function(bn,bo){var bp,bq,br;bp=null;bq=0;while(bq<bo.length&&bp==null){br=bn(bo[bq]);br!=null&&br.$==1?bp=br:void 0;bq=bq+1;}return bp;};A.tryFindIndex=function(bn,bo){var bp,bq;bp=null;bq=0;while(bq<bo.length&&bp==null){bn(bo[bq])?bp={$:1,$0:bq}:void 0;bq=bq+1;}return bp;};A.exists=function(bn,bo){var bp,bq,br,bs;bp=false;bq=0;bs=A.length(bo);while(!bp&&bq<bs)if(bn(bo[bq]))bp=true;else bq=bq+1;return bp;};A.filter=function(bn,bo){var bp,bq,br;bp=[];for(bq=0,br=bo.length-1;bq<=br;bq++)if(bn(bo[bq]))bp.push(bo[bq]);return bp;};A.create=function(bn,bo){var bp,bq,br;bp=new a.Array(bn);for(bq=0,br=bn-1;bq<=br;bq++)bp[bq]=bo;return bp;};A.concat=function(bn){return a.Array.prototype.concat.apply([],A.ofSeq(bn));};A.ofSeq=function(bn){var bo,bp;if(bn instanceof a.Array)return bn.slice();else if(bn instanceof C)return A.ofList(bn);else{bo=[];bp=O.Get(bn);try{while(bp.MoveNext())bo.push(bp.Current());return bo;}finally{if("Dispose"in bp)bp.Dispose();}}};A.pick=function(bn,bo){var bp;bp=A.tryPick(bn,bo);return bp==null?f.FailWith("KeyNotFoundException"):bp.$0;};A.init=function(bn,bo){var bp,bq,br;bn<0?f.FailWith("Negative size given."):null;bp=new a.Array(bn);for(bq=0,br=bn-1;bq<=br;bq++)bp[bq]=bo(bq);return bp;};A.forall=function(bn,bo){var bp,bq,br,bs;bp=true;bq=0;bs=A.length(bo);while(bp&&bq<bs)if(bn(bo[bq]))bq=bq+1;else bp=false;return bp;};E.EmptyAttr=function(){P.$cctor();return P.EmptyAttr;};E.AppendTree=function(bn,bo){var bp;return bn===null?bo:bo===null?bn:(bp=new l({$:2,$0:bn,$1:bo}),(E.SetFlags(bp,E.Flags(bn)|E.Flags(bo)),bp));};E.Updates=function(bn){return r.MapTreeReduce(function(bo){return bo.NChanged();},q.Const(),q.Map2Unit,bn.DynNodes);};E.SetFlags=function(bn,bo){bn.flags=bo;};E.Flags=function(bn){return bn!==null&&bn.hasOwnProperty("flags")?bn.flags:0;};E.Insert=function(bn,bo){var bp,bq,br;function bs(bt){if(!(bt===null))if(bt!=null&&bt.$==1)bp.push(bt.$0);else if(bt!=null&&bt.$==2){bs(bt.$0);bs(bt.$1);}else if(bt!=null&&bt.$==3)bt.$0(bn);else if(bt!=null&&bt.$==4)bq.push(bt.$0);}bp=[];bq=[];bs(bo);br=bp.slice(0);return N.New(bn,E.Flags(bo),br,bq.length===0?null:{$:1,$0:function(bt){Z.iter(function(bu){bu(bt);},bq);}});};E.HasChangeAnim=function(bn){var bo;bo=4;return(bn.DynFlags&bo)===bo;};E.GetChangeAnim=function(bn){return E.GetAnim(bn,function(bo,bp){return bo.NGetChangeAnim(bp);});};E.HasEnterAnim=function(bn){var bo;bo=1;return(bn.DynFlags&bo)===bo;};E.GetEnterAnim=function(bn){return E.GetAnim(bn,function(bo,bp){return bo.NGetEnterAnim(bp);});};E.HasExitAnim=function(bn){var bo;bo=2;return(bn.DynFlags&bo)===bo;};E.GetExitAnim=function(bn){return E.GetAnim(bn,function(bo,bp){return bo.NGetExitAnim(bp);});};E.GetAnim=function(bn,bo){return L.Concat(A.map(function(bp){return bo(bp,bn.DynElem);},bn.DynNodes));};E.Sync=function(bn,bo){A.iter(function(bp){bp.NSync(bn);},bo.DynNodes);};F=h.Updates=bj.Class({},null,F);F.Create=function(bn){var bo;bo=null;bo=F.New(bn,null,function(){var bp;bp=bo.s;return bp===null?(bp=G.Copy(bo.c()),bo.s=bp,G.WhenObsoleteRun(bp,function(){bo.s=null;}),bp):bp;});return bo;};F.New=function(bn,bo,bp){return new F({c:bn,s:bo,v:bp});};G.WhenRun=function(bn,bo,bp){var bq;bq=bn.s;bq==null?bp():bq!=null&&bq.$==2?(bq.$1.push(bp),bo(bq.$0)):bq!=null&&bq.$==3?(bq.$0.push(bo),bq.$1.push(bp)):bo(bq.$0);};G.Map2Unit=function(bn,bo){var bp,bq,br;function bs(){var bt,bu,bv;if(!(bt=br.s,bt!=null&&bt.$==0||bt!=null&&bt.$==2)){bu=G.ValueAndForever(bn);bv=G.ValueAndForever(bo);bu!=null&&bu.$==1?bv!=null&&bv.$==1?bu.$0[1]&&bv.$0[1]?G.MarkForever(br,null):G.MarkReady(br,null):void 0:void 0;}}bp=bn.s;bq=bo.s;return bp!=null&&bp.$==0?bq!=null&&bq.$==0?G.New({$:0,$0:null}):bo:bq!=null&&bq.$==0?bn:(br=G.New({$:3,$0:[],$1:[]}),(G.When(bn,bs,br),G.When(bo,bs,br),br));};G.Copy=function(bn){var bo,bp,bq;bo=bn.s;return bo==null?bn:bo!=null&&bo.$==2?(bp=G.New({$:2,$0:bo.$0,$1:[]}),(G.WhenObsolete(bn,bp),bp)):bo!=null&&bo.$==3?(bq=G.New({$:3,$0:[],$1:[]}),(G.When(bn,function(br){G.MarkDone(bq,bn,br);},bq),bq)):bn;};G.WhenObsoleteRun=function(bn,bo){var bp;bp=bn.s;bp==null?bo():bp!=null&&bp.$==2?bp.$1.push(bo):bp!=null&&bp.$==3?bp.$1.push(bo):void 0;};G.ValueAndForever=function(bn){var bo;bo=bn.s;return bo!=null&&bo.$==0?{$:1,$0:[bo.$0,true]}:bo!=null&&bo.$==2?{$:1,$0:[bo.$0,false]}:null;};G.MarkForever=function(bn,bo){var bp,bq,br,bs;bp=bn.s;if(bp!=null&&bp.$==3){bn.s={$:0,$0:bo};bq=bp.$0;for(br=0,bs=A.length(bq)-1;br<=bs;br++)(A.get(bq,br))(bo);}else void 0;};G.MarkReady=function(bn,bo){var bp,bq,br,bs;bp=bn.s;if(bp!=null&&bp.$==3){bn.s={$:2,$0:bo,$1:bp.$1};bq=bp.$0;for(br=0,bs=A.length(bq)-1;br<=bs;br++)(A.get(bq,br))(bo);}else void 0;};G.When=function(bn,bo,bp){var bq;bq=bn.s;bq==null?G.Obsolete(bp):bq!=null&&bq.$==2?(G.EnqueueSafe(bq.$1,bp),bo(bq.$0)):bq!=null&&bq.$==3?(bq.$0.push(bo),G.EnqueueSafe(bq.$1,bp)):bo(bq.$0);};G.WhenObsolete=function(bn,bo){var bp;bp=bn.s;bp==null?G.Obsolete(bo):bp!=null&&bp.$==2?G.EnqueueSafe(bp.$1,bo):bp!=null&&bp.$==3?G.EnqueueSafe(bp.$1,bo):void 0;};G.MarkDone=function(bn,bo,bp){var bq;if(bq=bo.s,bq!=null&&bq.$==0)G.MarkForever(bn,bp);else G.MarkReady(bn,bp);};G.EnqueueSafe=function(bn,bo){var bp,bq,br,bs;bn.push(bo);if(bn.length%20===0){bp=bn.slice(0);bf.Clear(bn);for(bq=0,br=A.length(bp)-1;bq<=br;bq++){bs=A.get(bp,bq);typeof bs=="object"?function(bt){if(bt.s)bn.push(bt);}(bs):function(bt){bn.push(bt);}(bs);}}else void 0;};J.New=function(bn,bo){return{PreviousNodes:bn,Top:bo};};K.get_Empty=function(){return{$:0,$0:new U.New$3()};};K.FindAll=function(bn){var bo;function bp(br){if(br!=null&&br.$==0){bp(br.$0);bp(br.$1);}else if(br!=null&&br.$==1)bq(br.$0);else if(br!=null&&br.$==2)bp(br.$0.Current);else if(br!=null&&br.$==6)A.iter(bq,br.$0.Holes);}function bq(br){bo.push(br);bp(br.Children);}bo=[];bp(bn);return{$:0,$0:new U.New$2(bo)};};K.Filter=function(bn,bo){return{$:0,$0:_5.Filter(bn,bo.$0)};};K.Intersect=function(bn,bo){return{$:0,$0:_5.Intersect(bn.$0,bo.$0)};};K.ToArray=function(bn){return _5.ToArray(bn.$0);};K.Except=function(bn,bo){return{$:0,$0:_5.Except(bn.$0,bo.$0)};};L.get_UseAnimations=function(){return W.UseAnimations();};L.Play=function(bn){var bo;bo=null;return V.Delay(function(){return V.Bind(L.Run(a.ignore,W.Actions(bn)),function(){W.Finalize(bn);return V.Return(null);});});};L.Append=function(bn,bo){return{$:0,$0:X.Append(bn.$0,bo.$0)};};L.Concat=function(bn){return{$:0,$0:X.Concat(Z.map(W.List,bn))};};L.Run=function(bn,bo){var bp;function bq(br){function bs(bt,bu){var bv;bv=bu-bt;bo.Compute(bv);bn();return bv<=bp?void a.requestAnimationFrame(function(bw){bs(bt,bw);}):br();}a.requestAnimationFrame(function(bt){bs(bt,bt);});}bp=bo.Duration;return bp===0?V.Zero():V.FromContinuations(function(br,bs,bt){return bq.apply(null,[br,bs,bt]);});};N.New=function(bn,bo,bp,bq){var br;br={DynElem:bn,DynFlags:bo,DynNodes:bp};bj.SetOptional(br,"OnAfterRender",bq);return br;};B.head=function(bn){return bn.$==1?bn.$0:B.listEmpty();};B.tail=function(bn){return bn.$==1?bn.$1:B.listEmpty();};B.listEmpty=function(){return f.FailWith("The input list was empty.");};O.Get=function(bn){return bn instanceof a.Array?O.ArrayEnumerator(bn):p.Equals(typeof bn,"string")?O.StringEnumerator(bn):bn.GetEnumerator();};O.ArrayEnumerator=function(bn){return new Y.New(0,null,function(bo){var bp;bp=bo.s;return bp<A.length(bn)&&(bo.c=A.get(bn,bp),bo.s=bp+1,true);},void 0);};O.StringEnumerator=function(bn){return new Y.New(0,null,function(bo){var bp;bp=bo.s;return bp<bn.length&&(bo.c=bn[bp],bo.s=bp+1,true);},void 0);};O.Get0=function(bn){return bn instanceof a.Array?O.ArrayEnumerator(bn):p.Equals(typeof bn,"string")?O.StringEnumerator(bn):"GetEnumerator0"in bn?bn.GetEnumerator0():bn.GetEnumerator();};P.$cctor=function(){P.$cctor=a.ignore;P.EmptyAttr=null;};Q.Int=function(){Q.set_counter(Q.counter()+1);return Q.counter();};Q.set_counter=function(bn){_6.$cctor();_6.counter=bn;};Q.counter=function(){_6.$cctor();return _6.counter;};R.$cctor=function(){R.$cctor=a.ignore;R.LoadedTemplates=new T.New$5();R.LocalTemplatesLoaded=false;R.TextHoleRE="\\${([^}]+)}";};T=S.Dictionary=bj.Class({set_Item:function(bn,bo){this.set(bn,bo);},TryGetValue:function(bn,bo){var bp,bq,br;bp=this;bq=this.data[this.hash(bn)];return bq&&(br=A.tryPick(function(bs){var bt;bt=f.KeyValue(bs);return bp.equals.apply(null,[bt[0],bn])?{$:1,$0:bt[1]}:null;},bq),br!=null&&br.$==1&&(bo.set(br.$0),true));},set:function(bn,bo){var bp,bq,br,bs;bp=this;bq=this.hash(bn);br=this.data[bq];br?(bs=A.tryFindIndex(function(bt){return bp.equals.apply(null,[(f.KeyValue(bt))[0],bn]);},br),bs==null?(this.count=this.count+1,br.push({K:bn,V:bo})):br[bs.$0]={K:bn,V:bo}):(this.count=this.count+1,this.data[bq]=new a.Array({K:bn,V:bo}));},ContainsKey:function(bn){var bo,bp;bo=this;bp=this.data[this.hash(bn)];return bp&&A.exists(function(bq){return bo.equals.apply(null,[(f.KeyValue(bq))[0],bn]);},bp);},get_Item:function(bn){return this.get(bn);},get:function(bn){var bo,bp;bo=this;bp=this.data[this.hash(bn)];return bp?A.pick(function(bq){var br;br=f.KeyValue(bq);return bo.equals.apply(null,[br[0],bn])?{$:1,$0:br[1]}:null;},bp):_0.notPresent();},GetEnumerator:function(){return O.Get0(this);},GetEnumerator0:function(){return O.Get0(A.concat(u.GetFieldValues(this.data)));}},g,T);T.New$5=bj.Ctor(function(){T.New$6.call(this,[],p.Equals,p.Hash);},T);T.New$6=bj.Ctor(function(bn,bo,bp){var bq,br;this.equals=bo;this.hash=bp;this.count=0;this.data=[];bq=O.Get(bn);try{while(bq.MoveNext()){br=bq.Current();this.set(br.K,br.V);}}finally{if("Dispose"in bq)bq.Dispose();}},T);U=S.HashSet=bj.Class({Contains:function(bn){var bo;bo=this.data[this.hash(bn)];return bo==null?false:this.arrContains(bn,bo);},Add:function(bn){return this.add(bn);},add:function(bn){var bo,bp;bo=this.hash(bn);bp=this.data[bo];return bp==null?(this.data[bo]=[bn],this.count=this.count+1,true):this.arrContains(bn,bp)?false:(bp.push(bn),this.count=this.count+1,true);},IntersectWith:function(bn){var bo,bp,bq,br,bs;bo=new U.New$4(bn,this.equals,this.hash);bp=bb.concat(this.data);for(bq=0,br=bp.length-1;bq<=br;bq++){bs=bp[bq];!bo.Contains(bs)?this.Remove(bs):void 0;}},get_Count:function(){return this.count;},CopyTo:function(bn){var bo,bp,bq,br;bo=0;bp=bb.concat(this.data);for(bq=0,br=bp.length-1;bq<=br;bq++)A.set(bn,bq,bp[bq]);},ExceptWith:function(bn){var bo;bo=O.Get(bn);try{while(bo.MoveNext())this.Remove(bo.Current());}finally{if("Dispose"in bo)bo.Dispose();}},arrContains:function(bn,bo){var bp,bq,br,bs;bp=true;bq=0;bs=bo.length;while(bp&&bq<bs)if(this.equals.apply(null,[bo[bq],bn]))bp=false;else bq=bq+1;return!bp;},Remove:function(bn){var bo;bo=this.data[this.hash(bn)];return bo==null?false:this.arrRemove(bn,bo)&&(this.count=this.count-1,true);},arrRemove:function(bn,bo){var bp,bq,br,bs;bp=true;bq=0;bs=bo.length;while(bp&&bq<bs)if(this.equals.apply(null,[bo[bq],bn])){bo.splice.apply(bo,[bq,1]);bp=false;}else bq=bq+1;return!bp;},GetEnumerator:function(){return O.Get(bb.concat(this.data));},GetEnumerator0:function(){return O.Get(bb.concat(this.data));}},g,U);U.New$3=bj.Ctor(function(){U.New$4.call(this,[],p.Equals,p.Hash);},U);U.New$2=bj.Ctor(function(bn){U.New$4.call(this,bn,p.Equals,p.Hash);},U);U.New$4=bj.Ctor(function(bn,bo,bp){var bq;this.equals=bo;this.hash=bp;this.data=[];this.count=0;bq=O.Get(bn);try{while(bq.MoveNext())this.add(bq.Current());}finally{if("Dispose"in bq)bq.Dispose();}},U);V.Delay=function(bn){return function(bo){try{(bn(null))(bo);}catch(bp){bo.k({$:1,$0:bp});}};};V.Bind=function(bn,bo){return V.checkCancel(function(bp){bn(_1.New(function(bq){var br;if(bq.$==0){br=bq.$0;V.scheduler().Fork(function(){try{(bo(br))(bp);}catch(bs){bp.k({$:1,$0:bs});}});}else V.scheduler().Fork(function(){bp.k(bq);});},bp.ct));});};V.Zero=function(){_2.$cctor();return _2.Zero;};V.Start=function(bn,bo){var bp,bq;bp=(bq=(V.defCTS())[0],bo==null?bq:bo.$0);V.scheduler().Fork(function(){if(!bp.c)bn(_1.New(function(br){if(br.$==1)V.UncaughtAsyncError(br.$0);},bp));});};V.Return=function(bn){return function(bo){bo.k({$:0,$0:bn});};};V.checkCancel=function(bn){return function(bo){if(bo.ct.c)V.cancel(bo);else bn(bo);};};V.defCTS=function(){_2.$cctor();return _2.defCTS;};V.UncaughtAsyncError=function(bn){bk.log("WebSharper: Uncaught asynchronous exception",bn);};V.FromContinuations=function(bn){return function(bo){var bp;function bq(br){if(bp[0])f.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bp[0]=true;V.scheduler().Fork(br);}}bp=[false];bn(function(br){bq(function(){bo.k({$:0,$0:br});});},function(br){bq(function(){bo.k({$:1,$0:br});});},function(br){bq(function(){bo.k({$:2,$0:br});});});};};V.cancel=function(bn){bn.k({$:2,$0:new ba.New(bn.ct)});};V.scheduler=function(){_2.$cctor();return _2.scheduler;};W.UseAnimations=function(){_4.$cctor();return _4.UseAnimations;};W.Actions=function(bn){return W.ConcatActions(A.choose(function(bo){return bo.$==1?{$:1,$0:bo.$0}:null;},X.ToArray(bn.$0)));};W.Finalize=function(bn){A.iter(function(bo){if(bo.$==0)bo.$0();},X.ToArray(bn.$0));};W.List=function(bn){return bn.$0;};W.ConcatActions=function(bn){var bo,bp,bq,br;bo=r.ofSeqNonCopying(bn);bp=A.length(bo);return bp===0?W.Const():bp===1?A.get(bo,0):(bq=Z.max(Z.map(function(bs){return bs.Duration;},bo)),(br=A.map(function(bs){return W.Prolong(bq,bs);},bo),W.Def(bq,function(bs){A.iter(function(bt){bt.Compute(bs);},br);})));};W.Const=function(bn){return W.Def(0,function(){return bn;});};W.Prolong=function(bn,bo){var bp,bq,br;bp=bo.Compute;bq=bo.Duration;br=bd.Create(function(){return bo.Compute(bo.Duration);});return{Compute:function(bs){return bs>=bq?br.f():bp(bs);},Duration:bn};};W.Def=function(bn,bo){return{Compute:bo,Duration:bn};};X.Append=function(bn,bo){return bn.$==0?bo:bo.$==0?bn:{$:2,$0:bn,$1:bo};};X.Concat=function(bn){var bo;bo=r.ofSeqNonCopying(bn);return r.TreeReduce(X.Empty(),X.Append,bo);};X.ToArray=function(bn){var bo;function bp(bq){if(bq.$==1)bo.push(bq.$0);else if(bq.$==2){bp(bq.$0);bp(bq.$1);}else if(bq.$==3)A.iter(function(br){bo.push(br);},bq.$0);}bo=[];bp(bn);return bo.slice(0);};X.Empty=function(){bc.$cctor();return bc.Empty;};G.Obsolete=function(bn){var bo,bp,bq,br,bs;bp=bn.s;if(bp==null||(bp!=null&&bp.$==2?(bo=bp.$1,false):bp!=null&&bp.$==3?(bo=bp.$1,false):true))void 0;else{bn.s=null;for(bq=0,br=A.length(bo)-1;bq<=br;bq++){bs=A.get(bo,bq);typeof bs=="object"?function(bt){G.Obsolete(bt);}(bs):bs();}}};G.New=function(bn){return{s:bn};};Y=O.T=bj.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},g,Y);Y.New=bj.Ctor(function(bn,bo,bp,bq){this.s=bn;this.c=bo;this.n=bp;this.d=bq;},Y);Z.iter=function(bn,bo){var bp;bp=O.Get(bo);try{while(bp.MoveNext())bn(bp.Current());}finally{if("Dispose"in bp)bp.Dispose();}};Z.map=function(bn,bo){return{GetEnumerator:function(){var bp;bp=O.Get(bo);return new Y.New(null,null,function(bq){return bp.MoveNext()&&(bq.c=bn(bp.Current()),true);},function(){bp.Dispose();});}};};Z.fold=function(bn,bo,bp){var bq,br;bq=bo;br=O.Get(bp);try{while(br.MoveNext())bq=bn(bq,br.Current());return bq;}finally{if("Dispose"in br)br.Dispose();}};Z.max=function(bn){var bo,bp,bq;bo=O.Get(bn);try{if(!bo.MoveNext())Z.seqEmpty();bp=bo.Current();while(bo.MoveNext()){bq=bo.Current();p.Compare(bq,bp)===1?bp=bq:void 0;}return bp;}finally{if("Dispose"in bo)bo.Dispose();}};Z.seqEmpty=function(){return f.FailWith("The input sequence was empty.");};_0.notPresent=function(){return f.FailWith("The given key was not present in the dictionary.");};_1.New=function(bn,bo){return{k:bn,ct:bo};};_2.$cctor=function(){_2.$cctor=a.ignore;_2.noneCT=_3.New(false,[]);_2.scheduler=new _9.New();_2.defCTS=[new _.New()];_2.Zero=V.Return();_2.GetCT=function(bn){bn.k({$:0,$0:bn.ct});};};_3.New=function(bn,bo){return{c:bn,r:bo};};_4.$cctor=function(){_4.$cctor=a.ignore;_4.CubicInOut=$.Custom(function(bn){var bo;bo=bn*bn;return 3*bo-2*(bo*bn);});_4.UseAnimations=true;};_5.Filter=function(bn,bo){return new U.New$2(A.filter(bn,_5.ToArray(bo)));};_5.Intersect=function(bn,bo){var bp;bp=new U.New$2(_5.ToArray(bn));bp.IntersectWith(_5.ToArray(bo));return bp;};_5.ToArray=function(bn){var bo;bo=A.create(bn.get_Count(),void 0);bn.CopyTo(bo);return bo;};_5.Except=function(bn,bo){var bp;bp=new U.New$2(_5.ToArray(bo));bp.ExceptWith(_5.ToArray(bn));return bp;};_6.$cctor=function(){_6.$cctor=a.ignore;_6.counter=0;};_7.string=function(bn,bo,bp){return bo==null?bp!=null&&bp.$==1?bn.slice(0,bp.$0+1):"":bp==null?bn.slice(bo.$0):bn.slice(bo.$0,bp.$0+1);};_8.concat=function(bn,bo){return A.ofSeq(bo).join(bn);};_8.StartsWith=function(bn,bo){return bn.substring(0,bo.length)==bo;};_8.SplitChars=function(bn,bo,bp){return _8.Split(bn,new a.RegExp("["+_8.RegexEscape(bo.join(""))+"]"),bp);};_8.RegexEscape=function(bn){return bn.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};_8.Split=function(bn,bo,bp){return bp===1?A.filter(function(bq){return bq!=="";},_8.SplitWith(bn,bo)):_8.SplitWith(bn,bo);};_8.SplitWith=function(bn,bo){return bn.split(bo);};_9=V.Scheduler=bj.Class({Fork:function(bn){var bo;bo=this;this.robin.push(bn);this.idle?(this.idle=false,a.setTimeout(function(){bo.tick();},0)):void 0;},tick:function(){var bn,bo,bp;bo=this;bp=bm.now();bn=true;while(bn)if(this.robin.length===0){this.idle=true;bn=false;}else{(this.robin.shift())();bm.now()-bp>40?(a.setTimeout(function(){bo.tick();},0),bn=false):void 0;}}},g,_9);_9.New=bj.Ctor(function(){this.idle=true;this.robin=[];},_9);_=b.CancellationTokenSource=bj.Class({},g,_);_.New=bj.Ctor(function(){this.c=false;this.pending=null;this.r=[];this.init=1;},_);$=h.Easing=bj.Class({},g,$);$.Custom=function(bn){return new $.New(bn);};$.New=bj.Ctor(function(bn){this.transformTime=bn;},$);ba=b.OperationCanceledException=bj.Class({},null,ba);ba.New=bj.Ctor(function(bn){ba.New$1.call(this,"The operation was canceled.",null,bn);},ba);ba.New$1=bj.Ctor(function(bn,bo,bp){this.message=bn;this.inner=bo;this.ct=bp;},ba);bb.concat=function(bn){var bo,bp;bo=[];for(var bq in bn)bo.push.apply(bo,bn[bq]);return bo;};bc.$cctor=function(){bc.$cctor=a.ignore;bc.Empty={$:0};};bd.Create=function(bn){return bh.New(false,bn,bd.forceLazy);};bd.forceLazy=function(){var bn;bn=this.v();this.c=true;this.v=bn;this.f=bd.cachedLazy;return bn;};bd.cachedLazy=function(){return this.v;};be.DocChildren=function(bn){var bo;function bp(bq){if(bq!=null&&bq.$==2)bp(bq.$0.Current);else if(bq!=null&&bq.$==1)bo.push(bq.$0.El);else if(bq==null);else if(bq!=null&&bq.$==5)bo.push(bq.$0);else if(bq!=null&&bq.$==4)bo.push(bq.$0.Text);else if(bq!=null&&bq.$==6)A.iter(function(br){if(br.constructor===D)bp(br);else bo.push(br);},bq.$0.Els);else{bp(bq.$0);bp(bq.$1);}}bo=[];bp(bn.Children);return{$:0,$0:r.ofSeqNonCopying(bo)};};be.Children=function(bn,bo){var bp,bq,br;if(bo!=null&&bo.$==1){br=[];bp=bo.$0[0].nextSibling;while(bp!==bo.$0[1]){br.push(bp);bp=bp.nextSibling;}return{$:0,$0:br};}else return{$:0,$0:A.init(bn.childNodes.length,(bq=bn.childNodes,function(bs){return bq[bs];}))};};be.Except=function(bn,bo){var bp;bp=bn.$0;return{$:0,$0:A.filter(function(bq){return A.forall(function(br){return!(bq===br);},bp);},bo.$0)};};be.Iter=function(bn,bo){A.iter(bn,bo.$0);};bf.Clear=function(bn){bn.splice(0,A.length(bn));};bh.New=function(bn,bo,bp){return{c:bn,v:bo,f:bp};};bj.OnLoad(function(){e.Main();});}());


if (typeof IntelliFactory !=='undefined')
  IntelliFactory.Runtime.Start();
